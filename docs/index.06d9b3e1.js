var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function n(t){return t&&t.__esModule?t.default:t}function r(t,e){return Object.keys(e).forEach((function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t}var o={},i={},s=t.parcelRequire63d7;null==s&&((s=function(t){if(t in o)return o[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return o[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){i[t]=e},t.parcelRequire63d7=s),s.register("jyq4T",(function(e,n){var r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",s="[object Function]",a="[object Object]",c=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[i]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[s]=l["[object Map]"]=l["[object Number]"]=l[a]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var p="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,f=p||d||Function("return this")(),h=n&&!n.nodeType&&n,g=h&&e&&!e.nodeType&&e,v=g&&g.exports===h,m=v&&p.process,y=function(){try{var t=g&&g.require&&g.require("util").types;return t||m&&m.binding&&m.binding("util")}catch(t){}}(),_=y&&y.isTypedArray;function b(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var w,k,x,E=Array.prototype,S=Function.prototype,O=Object.prototype,T=f["__core-js_shared__"],C=S.toString,L=O.hasOwnProperty,j=(w=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",I=O.toString,R=C.call(Object),N=RegExp("^"+C.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=v?f.Buffer:void 0,D=f.Symbol,P=f.Uint8Array,M=A?A.allocUnsafe:void 0,q=(k=Object.getPrototypeOf,x=Object,function(t){return k(x(t))}),B=Object.create,U=O.propertyIsEnumerable,F=E.splice,z=D?D.toStringTag:void 0,H=function(){try{var t=gt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),$=A?A.isBuffer:void 0,G=Math.max,W=Date.now,Y=gt(f,"Map"),K=gt(Object,"create"),V=function(){function t(){}return function(e){if(!Tt(e))return{};if(B)return B(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function J(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Q(t){var e=this.__data__=new J(t);this.size=e.size}function tt(t,e){var n=kt(t),r=!n&&wt(t),o=!n&&!r&&Et(t),i=!n&&!r&&!o&&Lt(t),s=n||r||o||i,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var u in t)!e&&!L.call(t,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||vt(u,c))||a.push(u);return a}function et(t,e,n){(void 0!==n&&!bt(t[e],n)||void 0===n&&!(e in t))&&ot(t,e,n)}function nt(t,e,n){var r=t[e];L.call(t,e)&&bt(r,n)&&(void 0!==n||e in t)||ot(t,e,n)}function rt(t,e){for(var n=t.length;n--;)if(bt(t[n][0],e))return n;return-1}function ot(t,e,n){"__proto__"==e&&H?H(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}X.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},X.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},X.prototype.get=function(t){var e=this.__data__;if(K){var n=e[t];return n===r?void 0:n}return L.call(e,t)?e[t]:void 0},X.prototype.has=function(t){var e=this.__data__;return K?void 0!==e[t]:L.call(e,t)},X.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=K&&void 0===e?r:e,this},J.prototype.clear=function(){this.__data__=[],this.size=0},J.prototype.delete=function(t){var e=this.__data__,n=rt(e,t);return!(n<0)&&(n==e.length-1?e.pop():F.call(e,n,1),--this.size,!0)},J.prototype.get=function(t){var e=this.__data__,n=rt(e,t);return n<0?void 0:e[n][1]},J.prototype.has=function(t){return rt(this.__data__,t)>-1},J.prototype.set=function(t,e){var n=this.__data__,r=rt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new X,map:new(Y||J),string:new X}},Z.prototype.delete=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e},Z.prototype.get=function(t){return ht(this,t).get(t)},Z.prototype.has=function(t){return ht(this,t).has(t)},Z.prototype.set=function(t,e){var n=ht(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Q.prototype.clear=function(){this.__data__=new J,this.size=0},Q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Q.prototype.get=function(t){return this.__data__.get(t)},Q.prototype.has=function(t){return this.__data__.has(t)},Q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof J){var r=n.__data__;if(!Y||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Z(r)}return n.set(t,e),this.size=n.size,this};var it,st=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),s=i.length;s--;){var a=i[it?s:++r];if(!1===e(o[a],a,o))break}return t};function at(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?function(t){var e=L.call(t,z),n=t[z];try{t[z]=void 0;var r=!0}catch(t){}var o=I.call(t);r&&(e?t[z]=n:delete t[z]);return o}(t):function(t){return I.call(t)}(t)}function ct(t){return Ct(t)&&at(t)==i}function ut(t){return!(!Tt(t)||function(t){return!!j&&j in t}(t))&&(St(t)?N:c).test(function(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function lt(t){if(!Tt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=mt(t),n=[];for(var r in t)("constructor"!=r||!e&&L.call(t,r))&&n.push(r);return n}function pt(t,e,n,r,o){t!==e&&st(e,(function(i,s){if(o||(o=new Q),Tt(i))!function(t,e,n,r,o,i,s){var c=yt(t,n),u=yt(e,n),l=s.get(u);if(l)return void et(t,n,l);var p=i?i(c,u,n+"",t,e,s):void 0,d=void 0===p;if(d){var f=kt(u),h=!f&&Et(u),g=!f&&!h&&Lt(u);p=u,f||h||g?kt(c)?p=c:Ct(b=c)&&xt(b)?p=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(c):h?(d=!1,p=function(t,e){if(e)return t.slice();var n=t.length,r=M?M(n):new t.constructor(n);return t.copy(r),r}(u,!0)):g?(d=!1,v=u,m=!0?(y=v.buffer,_=new y.constructor(y.byteLength),new P(_).set(new P(y)),_):v.buffer,p=new v.constructor(m,v.byteOffset,v.length)):p=[]:function(t){if(!Ct(t)||at(t)!=a)return!1;var e=q(t);if(null===e)return!0;var n=L.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&C.call(n)==R}(u)||wt(u)?(p=c,wt(c)?p=function(t){return function(t,e,n,r){var o=!n;n||(n={});var i=-1,s=e.length;for(;++i<s;){var a=e[i],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),o?ot(n,a,c):nt(n,a,c)}return n}(t,jt(t))}(c):Tt(c)&&!St(c)||(p=function(t){return"function"!=typeof t.constructor||mt(t)?{}:V(q(t))}(u))):d=!1}var v,m,y,_;var b;d&&(s.set(u,p),o(p,u,r,i,s),s.delete(u));et(t,n,p)}(t,e,s,n,pt,r,o);else{var c=r?r(yt(t,s),i,s+"",t,e,o):void 0;void 0===c&&(c=i),et(t,s,c)}}),jt)}function dt(t,e){return _t(function(t,e,n){return e=G(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=G(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(s),b(t,this,a)}}(t,e,Nt),t+"")}var ft=H?function(t,e){return H(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Nt;function ht(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function gt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ut(n)?n:void 0}function vt(t,e){var n=typeof t;return!!(e=null==e?o:e)&&("number"==n||"symbol"!=n&&u.test(t))&&t>-1&&t%1==0&&t<e}function mt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||O)}function yt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var _t=function(t){var e=0,n=0;return function(){var r=W(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ft);function bt(t,e){return t===e||t!=t&&e!=e}var wt=ct(function(){return arguments}())?ct:function(t){return Ct(t)&&L.call(t,"callee")&&!U.call(t,"callee")},kt=Array.isArray;function xt(t){return null!=t&&Ot(t.length)&&!St(t)}var Et=$||function(){return!1};function St(t){if(!Tt(t))return!1;var e=at(t);return e==s||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ot(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function Tt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ct(t){return null!=t&&"object"==typeof t}var Lt=_?function(t){return function(e){return t(e)}}(_):function(t){return Ct(t)&&Ot(t.length)&&!!l[at(t)]};function jt(t){return xt(t)?tt(t,!0):lt(t)}var It,Rt=(It=function(t,e,n){pt(t,e,n)},dt((function(t,e){var n=-1,r=e.length,o=r>1?e[r-1]:void 0,i=r>2?e[2]:void 0;for(o=It.length>3&&"function"==typeof o?(r--,o):void 0,i&&function(t,e,n){if(!Tt(n))return!1;var r=typeof e;return!!("number"==r?xt(n)&&vt(e,n.length):"string"==r&&e in n)&&bt(n[e],t)}(e[0],e[1],i)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var s=e[n];s&&It(t,s,n,o)}return t})));function Nt(t){return t}e.exports=Rt})),s.register("gL7ev",(function(t,n){e(t.exports,"isNodeEnv",(function(){return i}),(function(t){return i=t})),e(t.exports,"dynamicRequire",(function(){return a}),(function(t){return a=t}));var r=s("hoEGD"),o=s("3crZL");function i(){return!r.isBrowserBundle()&&"[object process]"===Object.prototype.toString.call(void 0!==o?o:0)}function a(t,e){return t.require(e)}})),s.register("hoEGD",(function(t,n){function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}e(t.exports,"isBrowserBundle",(function(){return r}))})),s.register("3crZL",(function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,p=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++p<e;)c&&c[p].run();p=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||l||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}})),s.register("3Wlpk",(function(t,n){e(t.exports,"dateTimestampInSeconds",(function(){return u}),(function(t){return u=t})),e(t.exports,"timestampInSeconds",(function(){return l}),(function(t){return l=t}));var r=s("k6cxq"),o=s("gL7ev"),i={nowSeconds:function(){return Date.now()/1e3}};var a=o.isNodeEnv()?function(){try{return o.dynamicRequire(t,"perf_hooks").performance}catch(t){return}}():function(){var t=r.getGlobalObject().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),c=void 0===a?i:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}},u=i.nowSeconds.bind(i),l=c.nowSeconds.bind(c);!function(){var t=r.getGlobalObject().performance;if(t&&t.now){var e=36e5,n=t.now(),o=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-o):e,s=i<e,a=t.timing&&t.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-o):e;return s||c<e?i<=c?("timeOrigin",t.timeOrigin):("navigationStart",a):("dateNow",o)}"none"}()})),s.register("k6cxq",(function(n,r){e(n.exports,"getGlobalObject",(function(){return a})),e(n.exports,"getGlobalSingleton",(function(){return c}));var o=s("gL7ev"),i={};function a(){return o.isNodeEnv()?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}function c(t,e,n){var r=n||a(),o=r.__SENTRY__=r.__SENTRY__||{};return o[t]||(o[t]=e())}}));var a,c,u=s("jyq4T");var l=(c={isFunction:t=>"function"==typeof t,isObject:t=>null!==t&&"Object"===t.constructor.name,mapValues:(t,e)=>Object.entries(t).reduce(((t,[n,r])=>Object.assign(t,{[n]:e(r,n)})),{}),override:(t,e={})=>u(t,((t,e)=>e.reduce(((e,n)=>Object.assign(e,{[n]:t[n]})),{}))(e,Object.keys(t))),merge:u}).isObject,p=c.isFunction,d=c.mapValues,f=c.override,h=c.merge;a=(t,...e)=>{const n=h({},...e.flat()),{moduleComposer:r={}}=n,o={...t},i=d(o,(()=>[])),s={config:n,target:t,modules:o,dependencies:i};return{compose:(e,a={},c=(t=>t))=>{const u={...r.defaults,...a},l=c(g(t[e],u,e));return o[e]=f({[e]:l},r.overrides)[e],i[e]=Object.keys(u),{config:n,composition:s,...o}},composition:s,config:n}};const g=(t,e,n)=>{if(!l(t))return t;const r={},o={[n]:r,...e},i=d(t,((t,e)=>p(t)?t(o):g(t,o,e)));return Object.assign(r,i)};var v={app:({el:t,ui:e,components:n,vendorComponents:r,subscriptions:o})=>()=>{const i=Object.values(n.modals).map((t=>t())),s=t("div","app").append(r.gtagScript(),t("div","modals").append(...i),n.header.container(),n.dropzone().append(t("div","control-panel").append(n.imageUploadOptions.container(),n.roleList.container(),n.optionsBar.container()),n.tagList.container()));return o.settings.onChange("app","modal",(t=>{e.toggleBoolClass(s,"modal",t)})),s},dropzone:({elements:t,services:e})=>()=>t.dropzone().addEventListener("drop",(t=>{e.tags.insertFileBatchAsync(t.dataTransfer.files)})),gravatar:{actions:{container:({el:t,actions:e})=>()=>t("div").append(e.importButton(),e.loading(),e.error()),error:({el:t,services:e,subscriptions:n,ui:r})=>()=>{const o=t("div","error-message"),i=t("a","dismiss",{textContent:"Dismiss"}).addEventListener("click",e.gravatar.status.to.ready),s=t("div","error").append(o,i);return n.settings.onChange("gravatar","status",(()=>{r.toggleBoolClass(s,"visible",e.gravatar.status.is.error())})),n.settings.onChange("gravatar","errorMessage",(t=>{o.textContent=t})),s},importButton:({el:t,services:e,subscriptions:n,ui:r})=>()=>{const o=t("button","import",{textContent:"Import"}).addEventListener("click",(()=>{const{emails:t,fallback:n}=e.settings.getGravatar();e.tags.insertGravatarBatchAsync(t,n)}));return n.settings.onChange("gravatar","status",(()=>{r.toggleBoolClass(o,"visible",e.gravatar.status.is.ready())})),n.settings.onChange("gravatar","freetext",(t=>{o.disabled=!t.trim()})),o},loading:({el:t,services:e,subscriptions:n,ui:r})=>()=>{const o=t("div","loading-indicator lds-dual-ring");return n.settings.onChange("gravatar","status",(()=>{r.toggleBoolClass(o,"visible",e.gravatar.status.is.working())})),o}},content:{container:({el:t,content:e})=>()=>t("div","gravatar").append(e.freetext(),e.fallbacks()),fallback:({el:t,services:e,subscriptions:n,ui:r})=>o=>{const i=t("img","fallback",{title:o,src:`img/gravatar-fallbacks/${o}.png`}).addEventListener("click",(()=>{e.gravatar.changeFallback(o)}));return n.settings.onChange("gravatar","fallback",(t=>{r.toggleBoolClass(i,"selected",o===t)})),i},fallbacks:({el:t,content:e,elements:n,config:r})=>()=>{const o=r.gravatar.fallbacks.map(e.fallback),i=t("div").append(...o);return n.label("Select a generated image style to use in case profile image is not found.",i)},freetext:({el:t,services:e,subscriptions:n,elements:r})=>()=>{const o=t("textarea","freetext").addEventListener("input",(()=>{e.gravatar.changeFreetext(o.value)}));n.settings.onChange("gravatar","freetext",(t=>{o.value=t})),n.settings.onChange("gravatar","status",(()=>{o.disabled=e.gravatar.status.is.working()}));return r.label("Email addresses:",o)}},title:({el:t})=>()=>{const e=t("span","gravatar-title",{textContent:"Import images from Gravatar"}),n=t("a","about-gravatar",{text:"What is Gravatar?",href:"https://en.gravatar.com/support/what-is-gravatar/",target:"_blank"});return t("div").append(e,n)}},header:{container:({el:t,header:e})=>()=>t("header").append(e.titleBar()),titleBar:({services:t,el:e,config:n})=>()=>{const r=e("a","tips",{textContent:"Tips & tricks"}).addEventListener("click",(()=>{t.settings.changeModal("tips")})),o=e("a",{textContent:"Send feedback",target:"_blank",href:n.app.issues}),i=e("a",{textContent:"Source code",target:"_blank",href:n.app.source}),s=e("dev-bar").append(r,o,i);return s.setAttribute("app-name",n.app.name),s}},imageUploadOptions:{chooseImages:({el:t,services:e})=>()=>{const n=t("input",{type:"file",multiple:!0,accept:"image/*"}).addEventListener("change",(t=>{e.tags.insertFileBatchAsync(t.target.files)})),r=t("a",{textContent:"Choose images"}).addEventListener("click",(t=>{t.preventDefault(),n.click(),t.fileInput=n}));return t("span").append(r)},container:({el:t,imageUploadOptions:e})=>()=>t("div","image-upload-options").append(t("span",{textContent:"Drag & drop images"}),e.chooseImages(),e.gravatar()),gravatar:({el:t,services:e,vendorServices:n})=>()=>t("a",{textContent:"Import images from Gravatar"}).addEventListener("click",(()=>{n.gtag("event","gravatar-clicked"),e.settings.changeModal("gravatar")}))},modal:({elements:t,services:e,subscriptions:n})=>({name:r,title:o,content:i,actions:s})=>t.modal({title:o,content:i,actions:s,onVisibilityChange:t=>{n.settings.onChange("app","modal",(e=>{t(e===r)}))}}).addEventListener("dismiss",e.settings.clearModal),modals:{gravatar:({components:t})=>()=>t.modal({name:"gravatar",title:t.gravatar.title(),content:t.gravatar.content.container(),actions:t.gravatar.actions.container()}),tips:({el:t,components:e})=>()=>{const{roleShortcut:n,naming:r,images:o,laminating:i,multiples:s,badges:a}=e.tips,c=[n,r,o,i,s,a],u=t("div","tips");return c.forEach((e=>{const n=e();n.className="tip";const r=t("div","heading",{textContent:n.title});n.prepend(r),u.append(n)})),e.modal({name:"tips",content:u,title:"Tips & tricks"})},welcome:({el:t,components:e,services:n,config:r})=>()=>{const o=t("h1","welcome-title",{textContent:`Welcome to ${r.app.name}`}),i=t("img",{src:"img/welcome.png",width:800}),s=t("button",{textContent:"Continue"});s.addEventListener("click",n.settings.clearModal);const a=t("div","welcome").append(o,i);return e.modal({name:"welcome",content:a,actions:s})}},optionsBar:{container:({components:t,elements:e,subscriptions:n,ui:r,config:o})=>()=>{const i=e.layout({layout:o.options.layout,components:t.optionsBar.options});return i.className="options-bar visible-false",n.tags.onFirstInsert((()=>{r.toggleBoolClass(i,"visible",!0)})),i},numberOption:({elements:t,services:e,subscriptions:n,util:r,config:o})=>i=>{const{min:s,max:a,step:c}=o.options[i],u=t.number({min:s,max:a,step:c}).addEventListener("change",(t=>{e.settings.changeOption(i,parseInt(t.target.value))}));n.settings.onChange("options",i,(t=>{u.value=t}));const l=r.upperFirst(i);return t.label(l,u)},options:{modes:({el:t,components:e,config:n})=>()=>{const r=n.options.modes.map(e.optionsBar.numberOption);return t("span").append(...r)},outline:({el:t,elements:e,services:n,subscriptions:r})=>()=>{const o=t("input",{type:"checkbox"}).addEventListener("change",(()=>{n.settings.changeOption("outline",o.checked)}));return r.settings.onChange("options","outline",(t=>{o.checked=t})),e.label(o,"Show outline")},shapes:({el:t,components:e,config:n})=>()=>{const r=n.options.shapes.map(e.optionsBar.shapeOption);return t("span").append(...r)},size:({components:t})=>()=>t.optionsBar.numberOption("size"),sort:({el:t,elements:e,services:n,subscriptions:r,config:o})=>()=>{const i=Object.entries(o.options.sort).map((([e,n])=>t("option",{value:e,textContent:n}))),s=t("select").append(...i).addEventListener("change",(()=>{n.settings.changeOption("sort",s.value)}));return r.settings.onChange("options","sort",(t=>{s.value=t})),e.label("Keep sorted by",s)},spacing:({components:t})=>()=>t.optionsBar.numberOption("spacing")},shapeOption:({el:t,subscriptions:e,services:n,ui:r,config:o})=>i=>{const s=t("span","shape-option",{title:`Change shape to ${i}`,tabIndex:0}).addEventListener("click",(()=>{n.settings.changeOption("shape",i)})).addEventListener("keydown",(t=>{["Enter","Space"].includes(t.code)&&(s.click(),t.preventDefault())})),a=o.options.shapeRadius[i]||0;return s.style.borderRadius=`${a}%`,e.settings.onChange("options","shape",(t=>{r.toggleBoolClass(s,"selected",i===t)})),s}},roleList:{container:({el:t,roleList:e,subscriptions:n,ui:r})=>()=>{const o=t("div","role-list visible-false");return n.roles.onInsert((t=>{const n=e.roleCustomiser.container(t);o.append(n)})),n.roles.onFirstInsert((()=>{r.toggleBoolClass(o,"visible",!0)})),o},roleCustomiser:{container:({el:t,roleCustomiser:e,services:n})=>r=>{const o=e.masterRoleName(r),i=e.roleColorPicker(r),s=n.roles.isNilRole(r);return t("span",`role-customiser role${r}`,{hidden:s}).append(o,i)},masterRoleName:({elements:t,services:e,subscriptions:n})=>r=>{const o=t.editableSpan(`role-name role${r}`).addEventListener("change",(()=>{e.roles.changeRoleName(r,o.textContent)}));return n.roles.onChange(r,"roleName",(t=>{o.textContent=t})),o},roleColorPicker:({el:t,vendorComponents:e,services:n})=>r=>{const o=n.roles.getRole(r);return e.vanillaPicker({parent:t("div","color-picker"),color:o.color,onChange:t=>n.roles.changeRoleColor(r,t.hex)})}}},tagList:{container:({el:t,tagList:e,services:n,subscriptions:r,ui:o,util:i,config:s})=>()=>{const a=new Map,c=t("div","tag-list");r.tagInstances.onInsert((t=>{const n=e.tag.container(t);a.set(t,n),c.append(n),l()})),r.tagInstances.onBeforeRemove((t=>{a.get(t).remove(),a.delete(t)}));const u=()=>{o.refocus((()=>{n.tags.sortTagInstances().forEach((t=>{c.append(a.get(t.id))}))}))},l=i.debounce(u,s.debounce.sortTagList);return r.settings.onChange("options","sort",u),r.tagInstances.onChangeAny("tagName",l),r.tagInstances.onChangeAny("roleName",l),c},tag:{components:{roleName:({elements:t,services:e,subscriptions:n})=>r=>{const o=t.editableSpan("role-name").addEventListener("change",(()=>{e.tags.changeTagRole(r,o.textContent)}));return n.tagInstances.onChange(r,"roleName",(t=>{o.textContent=t})),o},tagImage:({el:t})=>()=>t("div","tag-image"),tagName:({elements:t,services:e,subscriptions:n})=>r=>{const o=t.editableSpan("tag-name").addEventListener("change",(()=>{e.tags.changeTagName(r,o.textContent)}));return n.tagInstances.onChange(r,"tagName",(t=>{o.textContent=t})),o}},container:({el:t,tag:e,elements:n,services:r,subscriptions:o,config:i})=>s=>{const a=n.layout({layout:i.tags.layout,components:e.components,componentArgs:[s]}),c=t("div").append(a);return o.tagInstances.onChange(s,"roleId",((t,{tagId:e,mode:n})=>{const o=r.roles.isNilRole(t);c.className=`tag tag${e} role${t} nil-role-${o} ${n}`})),c}}},tips:{badges:({el:t})=>()=>t("div",{title:"Blocked and other badges",innerHTML:"\n            <p>Create blocked and other badges in the same way as avatars.</p>\n            <img src='img/tips/blocked-risk.png' />\n        "}),images:({el:t})=>()=>t("div",{title:"Images",innerHTML:"\n            <p>\n                Have you ever joined a new team and struggled to remember everyone's names?\n                You're not alone! Profile <mark>photos are the most effective</mark> way to identify people.\n                Cartoon characters may be cute, but unless your team never changes, they're unhelpful.\n            </p>            \n            <p>            \n                For a better looking result, <mark>make sure your images are square</mark> in shape.\n            </p>"}),laminating:({el:t})=>()=>t("div",{title:"Laminating",innerHTML:"\n            <p>\n                For a more durable result, <mark>cut out the tags before your laminate them</mark>.\n                Keeping a small lip around the edges helps maintain adhesion.\n            </p>"}),multiples:({el:t})=>()=>t("div","multiples",{title:"Multiples",innerHTML:'\n            <p>\n                Only needing a single avatar per team member may be a sign that user stories are well defined,\n                and that team members can take stories to completion without context switching.\n                It also makes it easier to gauge who is focused on what and can serve as a natural WIP limit for the\n                team.\n                See <a target="_blank" href="https://en.wikipedia.org/wiki/INVEST_(mnemonic)">INVEST</a> for\n                characteristics of good quality user stories.\n            </p>\n\n            <p>\n                If multiples are really needed, consider one <mark>active</mark>, and one or more <mark>passive</mark>\n                avatars for each team member.\n                The active avatar indicates what a team member is focused on, while\n                the passive avatar may be used to indicate the team member is across an activity which has\n                become blocked, dependent on another team, or otherwise only requires ad hoc attention.\n            </p>\n            \n            <img src=\'img/tips/active-passive.png\' />\n        '}),naming:({el:t})=>()=>t("div",{title:"Naming",innerHTML:"\n            <p>\n                Prefer <mark>short names</mark> and <mark>abbreviated roles</mark>. \n                Less is more. Use just enough detail to identify people at a glance.\n                Avoid full names and position titles if possible.\n            </p>"}),roleShortcut:({el:t})=>()=>t("div",{title:"Role shortcut",innerHTML:"\n            <p>Roles can be set quickly by appending <mark>+role</mark> to a name. This applies to:</p>\n\n            <ul>\n                <li>File names, e.g. matt+dev.jpg</li>\n                <li>Directly on the name field of each tag, e.g. matt+dev</li>\n                <li>Gravatar emails, e.g. matt@fakemail.com+dev</li>\n            </ul>\n        "})}},m={};!function(t){function e(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function n(t,n,r,o,i,s){return e((a=e(e(n,t),e(o,s)))<<(c=i)|a>>>32-c,r);var a,c}function r(t,e,r,o,i,s,a){return n(e&r|~e&o,t,e,i,s,a)}function o(t,e,r,o,i,s,a){return n(e&o|r&~o,t,e,i,s,a)}function i(t,e,r,o,i,s,a){return n(e^r^o,t,e,i,s,a)}function s(t,e,r,o,i,s,a){return n(r^(e|~o),t,e,i,s,a)}function a(t,n){var a,c,u,l,p;t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;var d=1732584193,f=-271733879,h=-1732584194,g=271733878;for(a=0;a<t.length;a+=16)c=d,u=f,l=h,p=g,d=r(d,f,h,g,t[a],7,-680876936),g=r(g,d,f,h,t[a+1],12,-389564586),h=r(h,g,d,f,t[a+2],17,606105819),f=r(f,h,g,d,t[a+3],22,-1044525330),d=r(d,f,h,g,t[a+4],7,-176418897),g=r(g,d,f,h,t[a+5],12,1200080426),h=r(h,g,d,f,t[a+6],17,-1473231341),f=r(f,h,g,d,t[a+7],22,-45705983),d=r(d,f,h,g,t[a+8],7,1770035416),g=r(g,d,f,h,t[a+9],12,-1958414417),h=r(h,g,d,f,t[a+10],17,-42063),f=r(f,h,g,d,t[a+11],22,-1990404162),d=r(d,f,h,g,t[a+12],7,1804603682),g=r(g,d,f,h,t[a+13],12,-40341101),h=r(h,g,d,f,t[a+14],17,-1502002290),d=o(d,f=r(f,h,g,d,t[a+15],22,1236535329),h,g,t[a+1],5,-165796510),g=o(g,d,f,h,t[a+6],9,-1069501632),h=o(h,g,d,f,t[a+11],14,643717713),f=o(f,h,g,d,t[a],20,-373897302),d=o(d,f,h,g,t[a+5],5,-701558691),g=o(g,d,f,h,t[a+10],9,38016083),h=o(h,g,d,f,t[a+15],14,-660478335),f=o(f,h,g,d,t[a+4],20,-405537848),d=o(d,f,h,g,t[a+9],5,568446438),g=o(g,d,f,h,t[a+14],9,-1019803690),h=o(h,g,d,f,t[a+3],14,-187363961),f=o(f,h,g,d,t[a+8],20,1163531501),d=o(d,f,h,g,t[a+13],5,-1444681467),g=o(g,d,f,h,t[a+2],9,-51403784),h=o(h,g,d,f,t[a+7],14,1735328473),d=i(d,f=o(f,h,g,d,t[a+12],20,-1926607734),h,g,t[a+5],4,-378558),g=i(g,d,f,h,t[a+8],11,-2022574463),h=i(h,g,d,f,t[a+11],16,1839030562),f=i(f,h,g,d,t[a+14],23,-35309556),d=i(d,f,h,g,t[a+1],4,-1530992060),g=i(g,d,f,h,t[a+4],11,1272893353),h=i(h,g,d,f,t[a+7],16,-155497632),f=i(f,h,g,d,t[a+10],23,-1094730640),d=i(d,f,h,g,t[a+13],4,681279174),g=i(g,d,f,h,t[a],11,-358537222),h=i(h,g,d,f,t[a+3],16,-722521979),f=i(f,h,g,d,t[a+6],23,76029189),d=i(d,f,h,g,t[a+9],4,-640364487),g=i(g,d,f,h,t[a+12],11,-421815835),h=i(h,g,d,f,t[a+15],16,530742520),d=s(d,f=i(f,h,g,d,t[a+2],23,-995338651),h,g,t[a],6,-198630844),g=s(g,d,f,h,t[a+7],10,1126891415),h=s(h,g,d,f,t[a+14],15,-1416354905),f=s(f,h,g,d,t[a+5],21,-57434055),d=s(d,f,h,g,t[a+12],6,1700485571),g=s(g,d,f,h,t[a+3],10,-1894986606),h=s(h,g,d,f,t[a+10],15,-1051523),f=s(f,h,g,d,t[a+1],21,-2054922799),d=s(d,f,h,g,t[a+8],6,1873313359),g=s(g,d,f,h,t[a+15],10,-30611744),h=s(h,g,d,f,t[a+6],15,-1560198380),f=s(f,h,g,d,t[a+13],21,1309151649),d=s(d,f,h,g,t[a+4],6,-145523070),g=s(g,d,f,h,t[a+11],10,-1120210379),h=s(h,g,d,f,t[a+2],15,718787259),f=s(f,h,g,d,t[a+9],21,-343485551),d=e(d,c),f=e(f,u),h=e(h,l),g=e(g,p);return[d,f,h,g]}function c(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function u(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function l(t){var e,n,r="0123456789abcdef",o="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),o+=r.charAt(e>>>4&15)+r.charAt(15&e);return o}function p(t){return unescape(encodeURIComponent(t))}function d(t){return function(t){return c(a(u(t),8*t.length))}(p(t))}function f(t,e){return function(t,e){var n,r,o=u(t),i=[],s=[];for(i[15]=s[15]=void 0,o.length>16&&(o=a(o,8*t.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],s[n]=1549556828^o[n];return r=a(i.concat(u(e)),512+8*e.length),c(a(s.concat(r),640))}(p(t),p(e))}function h(t,e,n){return e?n?f(e,t):l(f(e,t)):n?d(t):l(d(t))}"function"==typeof define&&define.amd?define((function(){return h})):m?m=h:t.md5=h}(m);const y=({tag:t,mode:e,count:n})=>{const r=n-t[e].length;return r?r>0?{insert:Array(r).fill({tagId:t.id,mode:e})}:{remove:t[e].slice(r)}:{}};var _={gravatar:{buildImageUrl:({core:t,config:e})=>(n,r)=>{const{domain:o,size:i}=e.gravatar;return`${o}/avatar/${t.gravatar.hashEmail(n)}?r=g&s=${i}&d=${r}`},buildProfileUrl:({config:t,core:e})=>n=>{const{domain:r}=t.gravatar;return`${r}/${e.gravatar.hashEmail(n)}.json`},getNameFromProfile:()=>(t,e)=>t.name?.givenName||t.displayName||e,hashEmail:()=>t=>n(m)(t.trim().toLowerCase())},roles:{assignColor:({core:t,config:e})=>n=>r=>{const o=e.roles.presetColors[r.roleName],i=t.roles.randomColor(n),s=o||r.color||i;return{...r,color:s}},buildRole:({core:t,util:e})=>(n,r)=>e.pipe((t=>{const e=(t.roleName||"").trim().toUpperCase();return{...t,roleName:e}}),t.roles.assignColor(r))(n),randomColor:()=>t=>"#"+("00000"+(16777216*t|0).toString(16)).slice(-6)},tags:{buildTag:({util:t})=>e=>{const n=t.upperFirst((e.tagName||"").trim());return{...e,tagName:n,instances:[],active:[],passive:[]}},parseEmailExpression:({util:t})=>e=>{const n=e.indexOf("@"),r=n>-1,[o]=(r?e.substr(0,n):e).split("+"),i=e.lastIndexOf("+"),s=i>n,[a,c]=s?t.splitAt(e,i,1):[e];return{email:r?a:"",username:o,emailOrUsername:a,roleName:c}},parseFileExpression:()=>t=>{const[e,n]=t.split("/").pop().match(/^(\d+)?(.+)/)[2].split(".")[0].split("+").map((t=>t.trim()));return{tagName:e,roleName:n}},parseTagExpression:()=>t=>{const[e,n]=t.split("+").map((t=>t.trim()));return{tagName:e,roleName:n}},planTagInstanceAdjustment:()=>(t,e)=>t.flatMap((t=>Object.entries(e).flatMap((([e,n])=>y({tag:t,mode:e,count:n}))))),sortTagInstancesByTagThenMode:({config:t})=>(e,n)=>e.flatMap((e=>t.options.modes.flatMap((t=>e[t].map((t=>n(t))))))),sortTagsByName:()=>t=>t.sort(((t,e)=>t.tagName.localeCompare(e.tagName))),sortTagsByRoleThenName:()=>(t,e)=>t.sort(((t,n)=>{const{roleName:r}=e(t.roleId),{roleName:o}=e(n.roleId),i=r.localeCompare(o),s=t.tagName.localeCompare(n.tagName);return i||s}))}},b={dumpState:({stores:t,util:e})=>()=>e.mapValues(t,(t=>t.list()))},w={dropzone:({el:t})=>()=>{const e=t=>t.preventDefault();return t("div","dropzone").addEventListener("dragenter",e).addEventListener("dragover",e).addEventListener("drop",e)},editableSpan:({el:t,ui:e})=>n=>{const r=()=>o.dispatchEvent(e.event("change")),o=t("span",n).addEventListener("blur",(()=>{r()})).addEventListener("keydown",(t=>{"Enter"===t.code&&(t.preventDefault(),r())}));return o.setAttribute("contenteditable",!0),o},label:({el:t})=>(...e)=>{const n=e.map((e=>"string"==typeof e?t("span","label",{innerHTML:e}):e));return t("label").append(...n)},layout:({el:t})=>({layout:e,components:n,componentArgs:r=[]})=>{const o=e.split("|").map((t=>t.trim().split(" "))).map((e=>{const o=e.map((t=>n[t](...r)));return t("span","group").append(...o)}));return t("div","layout").append(...o)},modal:({el:t,ui:e})=>(n={})=>{const r={visible:!1,onVisibilityChange:()=>{}},{title:o,content:i,actions:s,visible:a,onVisibilityChange:c}={...r,...n},u=()=>{g.dispatchEvent(e.event("dismiss"))},l=t("span","dismiss").addEventListener("click",u),p=t("div","modal-title").append(o,l);e.toggleBoolClass(p,"visible",Boolean(o));const d=t("div","modal-content").append(i),f=t("div","modal-actions").append(s);e.toggleBoolClass(f,"visible",Boolean(s));const h=t("div","modal-prompt").append(p,d,f).addEventListener("click",(t=>t.stopPropagation())),g=t("div","modal-overlay").append(h).addEventListener("click",u),v=t=>{e.toggleBoolClass(g,"visible",t)};return v(a),c(v,g),g},number:({el:t,ui:e,util:n})=>({min:r,max:o,step:i})=>{const s=()=>parseInt(u.value),a=n.pipe((t=>isNaN(t)?r:t),(t=>t<r?r:t),(t=>t>o?o:t)),c=()=>{const t=s();t===a(t)&&u.dispatchEvent(e.event("change"))},u=t("input",{type:"number",min:r,max:o,step:i}).addEventListener("input",c).addEventListener("blur",(()=>{u.value=a(s()),c()}));return u}},k={setup:({window:t})=>()=>({date:()=>new t.Date,fetch:(...e)=>t.fetch(...e),random:()=>t.Math.random(),fileReader:()=>new t.FileReader})};const x={ready:"ready",working:"working",error:"error"};var E,S={gravatar:{changeFallback:({stores:t})=>e=>{t.settings.update("gravatar",{fallback:e})},changeFreetext:({stores:t})=>e=>{t.settings.update("gravatar",{freetext:e})},fetchImageAsync:({core:t,io:e})=>async(n,r)=>{const o=t.gravatar.buildImageUrl(n,r),i=await e.fetch(o);if(!i.ok)throw new Error(`Unexpected Gravatar response status ${i.status}.`);return i.blob()},fetchProfileAsync:({core:t,io:e})=>async n=>{if(!n)return{};const r=t.gravatar.buildProfileUrl(n),o=await e.fetch(r);if(404===o.status)return{};if(!o.ok)throw new Error(`Unexpected Gravatar response status ${o.status}.`);const i=await o.json(),[s]=i.entry;return s},status:({stores:t})=>{const e=Object.keys(x).reduce(((e,n)=>Object.assign(e,{[n]:()=>t.settings.find("gravatar").status===n})),{}),n={ready:()=>{const{freetext:n}=t.settings.find("gravatar");t.settings.update("gravatar",{status:x.ready,freetext:e.error()?n:"",errorMessage:""})},working:()=>{t.settings.update("gravatar",{status:x.working})},error:e=>{t.settings.update("gravatar",{status:x.error,errorMessage:e})}};return{is:e,to:n}}},roles:{changeRoleColor:({stores:t})=>(e,n)=>{t.roles.update(e,{color:n})},changeRoleName:({core:t,stores:e})=>(n,r)=>{const o=e.roles.find(n),i=t.roles.buildRole({...o,roleName:r});e.roles.update(n,i)},findOrInsertRoleWithName:({services:t,stores:e})=>(n="")=>{const r=e.roles.list().find((t=>n.toUpperCase()===t.roleName.toUpperCase()));return r?r.id:t.roles.insertRole({roleName:n})},getNilRoleId:({stores:t})=>()=>t.settings.find("app").nilRoleId,getRole:({stores:t})=>e=>t.roles.find(e),insertRole:({core:t,services:e,subscriptions:n,stores:r,io:o})=>i=>{const s=t.roles.buildRole(i,o.random());return r.roles.insert(s,(t=>{n.roles.onChange(t,"roleName",e.roles.setupRolePropagation(t))}))},isNilRole:({services:t})=>e=>e===t.roles.getNilRoleId(),setupRolePropagation:({stores:t})=>e=>()=>{const{roleName:n}=t.roles.find(e),r={roleName:n};t.tagInstances.list().filter((t=>t.roleId===e)).forEach((e=>t.tagInstances.update(e.id,r)))}},settings:{changeModal:({stores:t})=>e=>{t.settings.update("app",{modal:e})},changeOption:({stores:t})=>(e,n)=>{t.settings.update("options",{[e]:n})},clearModal:({stores:t})=>()=>{t.settings.update("app",{modal:null})},getGravatar:({stores:t})=>()=>{const e=t.settings.find("gravatar");return{emails:e.freetext.split(/[\r\n,;]+/g).map((t=>t.trim())).filter((t=>t)),...e}}},tags:{adjustTagInstanceCounts:({core:t,config:e,stores:n,services:r})=>()=>{const o=n.tags.list(),i=n.settings.find("options"),s=Object.fromEntries(e.options.modes.map((t=>[t,i[t]])));t.tags.planTagInstanceAdjustment(o,s).forEach((t=>{(t={insert:[],remove:[],...t}).insert.forEach(r.tags.insertTagInstance),t.remove.forEach(r.tags.removeTagInstance)}))},attachImageAsync:({stores:t,io:e})=>n=>r=>new Promise(((o,i)=>{const s=e.fileReader();s.readAsDataURL(n),s.addEventListener("load",(()=>{const e=s.result;t.tags.update(r,{image:e}),o()})),s.addEventListener("error",(()=>{i(s.error)}))})),buildTagInstance:({stores:t})=>e=>{const{tagId:n,mode:r}=e,{tagName:o,roleId:i}=t.tags.find(n),{roleName:s}=t.roles.find(i);return{tagId:n,tagName:o,roleId:i,roleName:s,mode:r}},changeTagName:({core:t,services:e,stores:n})=>(r,o)=>{const{tagId:i}=e.tags.getTagInstance(r),{tagName:s,roleName:a}=t.tags.parseTagExpression(o);if(n.tags.update(i,{tagName:s}),a){const t=e.roles.findOrInsertRoleWithName(a);n.tags.update(i,{roleId:t})}},changeTagRole:({services:t,stores:e})=>(n,r)=>{const o=t.roles.findOrInsertRoleWithName(r),{tagId:i}=e.tagInstances.find(n);e.tags.update(i,{roleId:o})},getTagInstance:({stores:t})=>e=>t.tagInstances.find(e),insertFileAsync:({core:t,services:e,util:n})=>r=>n.pipe(t.tags.parseFileExpression,e.tags.insertTag,e.tags.attachImageAsync(r))(r.name),insertFileBatchAsync:({services:t})=>e=>Array.from(e).map(t.tags.insertFileAsync),insertGravatarAsync:({core:t,services:e})=>(n,r)=>{const{email:o,username:i,emailOrUsername:s,roleName:a}=t.tags.parseEmailExpression(n),c=e.gravatar.fetchProfileAsync(o).then((n=>{const r=t.gravatar.getNameFromProfile(n,i);return e.tags.insertTag({tagName:r,roleName:a})}));return e.gravatar.fetchImageAsync(s,r).then((async t=>{const n=await c;return e.tags.attachImageAsync(t)(n)}))},insertGravatarBatchAsync:({services:t,config:e})=>async(n,r)=>{try{t.gravatar.status.to.working();const e=async e=>{try{await t.tags.insertGravatarAsync(e,r)}catch(t){}};await Promise.all(n.map(e)),t.gravatar.status.to.ready(),t.settings.clearModal()}catch(n){throw t.gravatar.status.to.error(e.gravatar.errorMessage),n}},insertTag:({core:t,services:e,stores:n,subscriptions:r,util:o})=>i=>o.pipe((({roleName:t,...n})=>({roleId:n.roleId||e.roles.findOrInsertRoleWithName(t),...n})),t.tags.buildTag,(t=>n.tags.insert(t,(t=>{r.tags.onChange(t,"tagName",e.tags.setupTagPropagation(t)),r.tags.onChange(t,"roleId",e.tags.setupRolePropagation(t))}))))(i||{}),insertTagInstance:({services:t,stores:e})=>n=>{const r=t.tags.buildTagInstance(n);return e.tagInstances.insert(r,(t=>{const{tagId:n,mode:o}=r,i=e.tags.find(n);e.tags.update(n,{instances:i.instances.concat(t),[o]:i[o].concat(t)})}))},removeTagInstance:({stores:t})=>e=>{const{tagId:n,mode:r}=t.tagInstances.find(e),o=t.tags.find(n),i=t=>t!==e;t.tags.update(n,{instances:o.instances.filter(i),[r]:o[r].filter(i)}),t.tagInstances.remove(e)},setupRolePropagation:({stores:t})=>e=>()=>{const{roleId:n,instances:r}=t.tags.find(e),{roleName:o}=t.roles.find(n);r.forEach((e=>t.tagInstances.update(e,{roleId:n,roleName:o})))},setupTagPropagation:({stores:t})=>e=>()=>{const{tagName:n,instances:r}=t.tags.find(e);r.forEach((e=>t.tagInstances.update(e,{tagName:n})))},sortTagInstances:({core:t,stores:e})=>()=>{const n={orderAdded:e.tags.list,roleThenName:()=>t.tags.sortTagsByRoleThenName(e.tags.list(),e.roles.find),name:()=>t.tags.sortTagsByName(e.tags.list())},{sort:r}=e.settings.find("options"),o=n[r]();return t.tags.sortTagInstancesByTagThenMode(o,e.tagInstances.find)}}},O={createHandlers:({services:t,subscriptions:e,util:n,config:r})=>()=>{const o=n.debounce(t.tags.adjustTagInstanceCounts,r.debounce.adjustTagInstanceCounts);r.options.modes.forEach((t=>{e.settings.onChange("options",t,o)})),e.tags.onInsert(o)},createStyleManager:({styles:t,subscriptions:e,ui:n,util:r})=>()=>{const{tagImage:o,roleColor:i,...s}=t,a=(...t)=>n.appendToHead(...t);a(...Object.values(s).map((t=>t()))),e.tags.onInsert(r.pipe(o,a)),e.roles.onInsert(r.pipe(i,a))},insertNilRole:({config:t,stores:e})=>()=>{const n=e.roles.insert(t.roles.nilRole);e.settings.update("app",{nilRoleId:n})},start:({startup:t})=>()=>(t.insertNilRole(),t.createHandlers(),t.createStyleManager(),{createRoot:t=>({render:e=>t.append(e)})})},T={},C="object"==typeof Reflect?Reflect:null,L=C&&"function"==typeof C.apply?C.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};E=C&&"function"==typeof C.ownKeys?C.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var j=Number.isNaN||function(t){return t!=t};function I(){I.init.call(this)}(T=I).once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}F(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&F(t,"error",e,n)}(t,o,{once:!0})}))},I.EventEmitter=I,I.prototype._events=void 0,I.prototype._eventsCount=0,I.prototype._maxListeners=void 0;var R=10;function N(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function A(t){return void 0===t._maxListeners?I.defaultMaxListeners:t._maxListeners}function D(t,e,n,r){var o,i,s,a;if(N(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),void 0===s)s=i[e]=n,++t._eventsCount;else if("function"==typeof s?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=A(t))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return t}function P(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=P.bind(r);return o.listener=n,r.wrapFn=o,o}function q(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):U(o,o.length)}function B(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function U(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function F(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}Object.defineProperty(I,"defaultMaxListeners",{enumerable:!0,get:function(){return R},set:function(t){if("number"!=typeof t||t<0||j(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");R=t}}),I.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},I.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||j(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},I.prototype.getMaxListeners=function(){return A(this)},I.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[t];if(void 0===a)return!1;if("function"==typeof a)L(a,this,e);else{var c=a.length,u=U(a,c);for(n=0;n<c;++n)L(u[n],this,e)}return!0},I.prototype.addListener=function(t,e){return D(this,t,e,!1)},I.prototype.on=I.prototype.addListener,I.prototype.prependListener=function(t,e){return D(this,t,e,!0)},I.prototype.once=function(t,e){return N(e),this.on(t,M(this,t,e)),this},I.prototype.prependOnceListener=function(t,e){return N(e),this.prependListener(t,M(this,t,e)),this},I.prototype.removeListener=function(t,e){var n,r,o,i,s;if(N(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},I.prototype.off=I.prototype.removeListener,I.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},I.prototype.listeners=function(t){return q(this,t,!0)},I.prototype.rawListeners=function(t){return q(this,t,!1)},I.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):B.call(t,e)},I.prototype.listenerCount=B,I.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]};var z,H={stateStore:(t={})=>{let e=1;const r=new Map,o=new Map,i=new(n(T)),s=t=>o.get(t)||{get:()=>null},a={onChange:(t,e,n)=>s(t).subscriptions.onChange(e,n),onChangeAny:(t,e)=>i.on(`change:${t}`,e),onInsert:t=>i.on("insert",t),onFirstInsert:t=>i.once("firstInsert",t),onBeforeRemove:t=>i.on("beforeRemove",t)},c=(t,s)=>{const a=t.id||e++,c={id:a,...t},u=new(n(T)),l={onChange:(t,e)=>{u.on(`change:${t}`,e),e(c[t],c)}};return o.set(a,{get:()=>({...c}),update:t=>{Object.entries(t).forEach((([t,e])=>{if(c[t]===e)return;c[t]=e;[u,i].forEach((e=>e.emit(`change:${t}`,c[t],c)))}))},subscriptions:l}),r.set(a,c),s&&s(a),i.emit("firstInsert",a),i.emit("insert",a),a};return Object.entries(t).map((([t,e])=>({id:t,...e}))).forEach((t=>c(t))),{insert:c,remove:t=>{i.emit("beforeRemove",t),o.delete(t),r.delete(t)},list:()=>[...r.values()],find:t=>s(t).get(),update:(t,e)=>s(t).update(e),subscriptions:a}}},$={setup:({storage:t,config:e})=>()=>Object.fromEntries(e.storage.stores.map((n=>{const r=e.storage.defaults[n];return[n,t.stateStore(r)]})))},G=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},W=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Y=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var K={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var X=function(){function t(e,n,r,o){G(this,t);var i=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===r){var s=e&&""+e;s&&function(e){if(e.startsWith("hsl")){var n=e.match(/([\-\d\.e]+)/g).map(Number),r=Y(n,4),o=r[0],s=r[1],a=r[2],c=r[3];void 0===c&&(c=1),o/=360,s/=100,a/=100,i.hsla=[o,s,a,c]}else if(e.startsWith("rgb")){var u=e.match(/([\-\d\.e]+)/g).map(Number),l=Y(u,4),p=l[0],d=l[1],f=l[2],h=l[3];void 0===h&&(h=1),i.rgba=[p,d,f,h]}else e.startsWith("#")?i.rgba=t.hexToRgb(e):i.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(s.toLowerCase())}else this.rgba=[e,n,r,void 0===o?1:o]}return W(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return V(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],r=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,r){return V(t*e[r],3===r?3:1)+n[r]}));return t?"hsla("+r+")":"hsl("+r+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(e){var n=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=K[n];return void 0===r?r:t.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=Y(t,4),n=e[0],r=e[1],o=e[2],i=e[3];n/=255,r/=255,o/=255;var s=Math.max(n,r,o),a=Math.min(n,r,o),c=void 0,u=void 0,l=(s+a)/2;if(s===a)c=u=0;else{var p=s-a;switch(u=l>.5?p/(2-s-a):p/(s+a),s){case n:c=(r-o)/p+(r<o?6:0);break;case r:c=(o-n)/p+2;break;case o:c=(n-r)/p+4}c/=6}return[c,u,l,i]}},{key:"hslToRgb",value:function(t){var e=Y(t,4),n=e[0],r=e[1],o=e[2],i=e[3],s=void 0,a=void 0,c=void 0;if(0===r)s=a=c=o;else{var u=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},l=o<.5?o*(1+r):o+r-o*r,p=2*o-l;s=u(p,l,n+1/3),a=u(p,l,n),c=u(p,l,n-1/3)}var d=[255*s,255*a,255*c].map(Math.round);return d[3]=i,d}}]),t}(),J=function(){function t(){G(this,t),this._events=[]}return W(t,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(e,n,r){this._events=this._events.filter((function(o){var i=!0;return e&&e!==o.target&&(i=!1),n&&n!==o.type&&(i=!1),r&&r!==o.handler&&(i=!1),i&&t._doRemove(o.target,o.type,o.handler),!i}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),t}();function Z(t,e,n,r){var o=!1;function i(t,e,n){return Math.max(e,Math.min(t,n))}function s(t,e,s){if(s&&(o=!0),o){t.preventDefault();var a=n.getBoundingClientRect(),c=a.width,u=a.height,l=e.clientX,p=e.clientY,d=i(l-a.left,0,c),f=i(p-a.top,0,u);r(d/c,f/u)}}function a(t,e){1===(void 0===t.buttons?t.which:t.buttons)?s(t,t,e):o=!1}function c(t,e){1===t.touches.length?s(t,t.touches[0],e):o=!1}e.add(n,"mousedown",(function(t){a(t,!0)})),e.add(n,"touchstart",(function(t){c(t,!0)})),e.add(t,"mousemove",a),e.add(n,"touchmove",c),e.add(t,"mouseup",(function(t){o=!1})),e.add(n,"touchend",(function(t){o=!1})),e.add(n,"touchcancel",(function(t){o=!1}))}function Q(t,e){return e.querySelector(t)}function tt(t){t.preventDefault(),t.stopPropagation()}function et(t,e,n,r,o){t.add(e,"keydown",(function(t){n.indexOf(t.key)>=0&&(o&&tt(t),r(t))}))}var nt=function(){function t(e){G(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new J,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return W(t,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(t,e,n){for(var r in t)n&&n.indexOf(r)>=0||(e[r]=t[r])}(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var r=t.color||t.colour;r&&this._setColor(r);var o=n.parent;if(o&&n.popup&&!this._popupInited){var i=function(t){return e.openHandler(t)};this._events.add(o,"click",i),et(this._events,o,[" ","Spacebar","Enter"],i),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&"keydown"===t.type?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;if(t)if("mousedown"===e||"focusin"===e){var r=(this.__containedEvent||0)+100;t.timeStamp>r&&(n=!0)}else tt(t),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="","mousedown"!==e&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new X(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var r=n.hsla;r[3]=1,n.hsla=r}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',n=function(t,e){var n=t.createElement("div");return n.innerHTML=e,n.firstElementChild}(this.settings.window.document,e);return this.domElement=n,this._domH=Q(".picker_hue",n),this._domSL=Q(".picker_sl",n),this._domA=Q(".picker_alpha",n),this._domEdit=Q(".picker_editor input",n),this._domSample=Q(".picker_sample",n),this._domOkay=Q(".picker_done button",n),this._domCancel=Q(".picker_cancel button",n),n.classList.add("layout_"+this.settings.layout),this.settings.alpha||n.classList.add("no_alpha"),this.settings.editor||n.classList.add("no_editor"),this.settings.cancelButton||n.classList.add("no_cancel"),this._ifPopup((function(){return n.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,r=this._events;function o(t,e,n){r.add(t,e,n)}o(n,"click",(function(t){return t.preventDefault()})),Z(this.settings.window,r,this._domH,(function(t,n){return e._setHSLA(t)})),Z(this.settings.window,r,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&Z(this.settings.window,r,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var i=this._domEdit;o(i,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),o(i,"focus",(function(t){var e=this;e.selectionStart===e.selectionEnd&&e.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};o(t.settings.window,"mousedown",e),o(t.settings.window,"focusin",e),et(r,n,["Esc","Escape"],e);var i=function(e){t.__containedEvent=e.timeStamp};o(n,"mousedown",i),o(n,"focusin",i),o(t._domCancel,"click",e)}));var s=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};o(this._domOkay,"click",s),et(r,n,["Enter"],s)}},{key:"_setPosition",value:function(){var t=this,e=this.settings.parent,n=this.domElement;e!==n.parentNode&&e.appendChild(n),this._ifPopup((function(r){"static"===t.settings.window.getComputedStyle(e).position&&(e.style.position="relative");var o=!0===r?"popup_right":"popup_"+r;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===o?n.classList.add(t):n.classList.remove(t)})),n.classList.add(o)}))}},{key:"_setHSLA",value:function(t,e,n,r,o){o=o||{};var i=this.colour,s=i.hsla;[t,e,n,r].forEach((function(t,e){(t||0===t)&&(s[e]=t)})),i.hsla=s,this._updateUI(o),this.onChange&&!o.silent&&this.onChange(i)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,r="hsl("+360*n[0]+", 100%, 50%)",o=e.hslString,i=e.hslaString,s=this._domH,a=this._domSL,c=this._domA,u=Q(".picker_selector",s),l=Q(".picker_selector",a),p=Q(".picker_selector",c);y(0,u,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=r,y(0,l,n[1]),_(0,l,1-n[2]),a.style.color=o,_(0,p,1-n[3]);var d=o,f=d.replace("hsl","hsla").replace(")",", 0)"),h="linear-gradient("+[d,f]+")";if(this._domA.style.backgroundImage=h+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.editorFormat,v=this.settings.alpha,m=void 0;switch(g){case"rgb":m=e.printRGB(v);break;case"hsl":m=e.printHSL(v);break;default:m=e.printHex(v)}this._domEdit.value=m}this._domSample.style.color=i}function y(t,e,n){e.style.left=100*n+"%"}function _(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",r=e.style.display!==n;return r&&(e.style.display=n),r}}],[{key:"StyleElement",get:function(){return _style}},{key:"css",get:function(){return".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}"}}]),t}();z=nt;var rt={roleColor:({el:t,subscriptions:e})=>n=>{const r=t("style");return e.roles.onChange(n,"color",(t=>{r.textContent=`\n                .role${n} .tag-image { border-color: ${t}; }            \n                .role${n} .role-name { background-color: ${t}; }\n            `})),r},tagImage:({el:t,subscriptions:e})=>n=>{const r=t("style");return e.tags.onChange(n,"image",(t=>{r.textContent=t?`.tag${n} .tag-image { background-image: url(${t}); }`:""})),r},tagOutline:({el:t,subscriptions:e})=>()=>{const n=t("style");return e.settings.onChange("options","outline",(t=>{n.textContent=t?"":".tag { border-color: transparent; }"})),n},tagShape:({el:t,subscriptions:e,config:n})=>()=>{const r=t("style");return e.settings.onChange("options","shape",(t=>{const e=n.options.shapeRadius[t];r.textContent=`.tag-image { border-radius: ${e}%; }`})),r},tagSize:({el:t,subscriptions:e,config:n})=>()=>{const r=t("style");return e.settings.onChange("options","size",(t=>{const e=t-2*n.tags.imagePadding;r.textContent=`\n            .tag-list { grid-template-columns: repeat(auto-fill, ${t}px); }\n            .tag-image { width: ${e}px; height: ${e}px; }\n        `})),r},tagSpacing:({el:t,subscriptions:e})=>()=>{const n=t("style");return e.settings.onChange("options","spacing",(t=>{n.textContent=`.tag-list { gap: ${t}px; }`})),n},vanillaPicker:({el:t})=>()=>t("style",{textContent:n(z).css})},ot={setup:({stores:t,util:e})=>()=>e.mapValues(t,(t=>t.subscriptions))},it={appendToHead:({window:t})=>(...e)=>t.document.head.append(...e),el:({window:t})=>(e,...n)=>{const r=t.document.createElement(e),o=n.map((t=>"string"==typeof t?{className:t}:t)),i=["append","addEventListener"].map((t=>{const e=r[t].bind(r);return{[t]:(...t)=>(e(...t),r)}}));return Object.assign(r,...o,...i)},event:({window:t})=>(...e)=>new t.Event(...e),refocus:({window:t})=>e=>{const n=t.document.activeElement;e(),n.focus()},toggleBoolClass:()=>(t,e,n)=>{t.classList.remove(`${e}-${Boolean(!n)}`),t.classList.add(`${e}-${Boolean(n)}`)}},st={debounce:(t,e)=>{if(!e)return t;let n=null;return(...r)=>{clearTimeout(n),n=setTimeout((()=>t(...r)),e)}},mapValues:(t,e)=>Object.entries(t).reduce(((t,[n,r])=>Object.assign(t,{[n]:e(r)})),{}),pipe:(...t)=>e=>t.reduce(((t,e)=>e(t)),e),splitAt:(t,e,n)=>[t.slice(0,e),t.slice(e+n)],upperFirst:t=>t?t[0].toUpperCase()+t.slice(1):""},at={gtagScript:({el:t,config:e})=>()=>{const{trackingId:n}=e.gtag;return t("script",{src:`https://www.googletagmanager.com/gtag/js?id=${n}`})},vanillaPicker:({window:t})=>({parent:e,color:r,onChange:o})=>(new(n(z))({window:t,parent:e,color:r,onChange:o}),e)},ct={};e(ct,"Integrations",(function(){return To})),e(ct,"Transports",(function(){return Qr}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ut=function(t,e){return(ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function lt(t,e){function n(){this.constructor=t}ut(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var pt=function(){return pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},pt.apply(this,arguments)};function dt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ft(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function ht(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ft(arguments[e]));return t}var gt={};e(gt,"FunctionToString",(function(){return Qe})),e(gt,"InboundFilters",(function(){return nn}));var vt={};function mt(t){t.then(null,(function(t){console.error(t)}))}e(vt,"forget",(function(){return mt})),e(vt,"getLocationHref",(function(){return Nt})),e(vt,"htmlTreeAsString",(function(){return It})),e(vt,"dsnToString",(function(){return qt})),e(vt,"makeDsn",(function(){return Ut})),e(vt,"SentryError",(function(){return Dt})),e(vt,"getGlobalObject",(function(){return s("k6cxq").getGlobalObject})),e(vt,"getGlobalSingleton",(function(){return s("k6cxq").getGlobalSingleton})),e(vt,"addInstrumentationHandler",(function(){return ve})),e(vt,"isString",(function(){return St})),e(vt,"isPrimitive",(function(){return Ot})),e(vt,"isErrorEvent",(function(){return kt})),e(vt,"isEvent",(function(){return Ct})),e(vt,"isDOMError",(function(){return xt})),e(vt,"isDOMException",(function(){return Et})),e(vt,"isError",(function(){return bt})),e(vt,"isPlainObject",(function(){return Tt})),e(vt,"isInstanceOf",(function(){return jt})),e(vt,"isThenable",(function(){return Lt})),e(vt,"logger",(function(){return Ft})),e(vt,"consoleSandbox",(function(){return $t})),e(vt,"addExceptionTypeValue",(function(){return Le})),e(vt,"addExceptionMechanism",(function(){return je})),e(vt,"getEventDescription",(function(){return Ce})),e(vt,"parseUrl",(function(){return Oe})),e(vt,"checkOrSetAlreadyCaught",(function(){return Ie})),e(vt,"uuid4",(function(){return Se})),e(vt,"normalizeToSize",(function(){return Ae})),e(vt,"normalize",(function(){return Ne})),e(vt,"getOriginalFunction",(function(){return Zt})),e(vt,"markFunctionWrapped",(function(){return Jt})),e(vt,"addNonEnumerableProperty",(function(){return Xt})),e(vt,"extractExceptionKeysForMessage",(function(){return re})),e(vt,"fill",(function(){return Vt})),e(vt,"urlEncode",(function(){return Qt})),e(vt,"dropUndefinedKeys",(function(){return oe})),e(vt,"makePromiseBuffer",(function(){return Ue})),e(vt,"severityFromString",(function(){return ze})),e(vt,"createStackParser",(function(){return ie})),e(vt,"getFunctionName",(function(){return ae})),e(vt,"eventStatusFromHttpCode",(function(){return He})),e(vt,"safeJoin",(function(){return Yt})),e(vt,"truncate",(function(){return Wt})),e(vt,"isMatchingPattern",(function(){return Kt})),e(vt,"supportsReferrerPolicy",(function(){return le})),e(vt,"supportsFetch",(function(){return ce})),e(vt,"isNativeFetch",(function(){return ue})),e(vt,"resolvedSyncPromise",(function(){return Pe})),e(vt,"SyncPromise",(function(){return Be})),e(vt,"rejectedSyncPromise",(function(){return Me})),e(vt,"serializeEnvelope",(function(){return Ye})),e(vt,"getEnvelopeType",(function(){return We})),e(vt,"createEnvelope",(function(){return Ge})),e(vt,"createClientReportEnvelope",(function(){return Ke})),e(vt,"updateRateLimits",(function(){return Ze})),e(vt,"disabledUntil",(function(){return Xe})),e(vt,"isRateLimited",(function(){return Je}));var yt=s("k6cxq"),_t=Object.prototype.toString;function bt(t){switch(_t.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return jt(t,Error)}}function wt(t,e){return _t.call(t)==="[object "+e+"]"}function kt(t){return wt(t,"ErrorEvent")}function xt(t){return wt(t,"DOMError")}function Et(t){return wt(t,"DOMException")}function St(t){return wt(t,"String")}function Ot(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function Tt(t){return wt(t,"Object")}function Ct(t){return"undefined"!=typeof Event&&jt(t,Event)}function Lt(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function jt(t,e){try{return t instanceof e}catch(t){return!1}}function It(t,e){try{for(var n=t,r=[],o=0,i=0,s=" > ".length,a=void 0;n&&o++<5&&!("html"===(a=Rt(n,e))||o>1&&i+r.length*s+a.length>=80);)r.push(a),i+=a.length,n=n.parentNode;return r.reverse().join(" > ")}catch(t){return"<unknown>"}}function Rt(t,e){var n,r,o,i,s,a=t,c=[];if(!a||!a.tagName)return"";c.push(a.tagName.toLowerCase());var u=e&&e.length?e.filter((function(t){return a.getAttribute(t)})).map((function(t){return[t,a.getAttribute(t)]})):null;if(u&&u.length)u.forEach((function(t){c.push("["+t[0]+'="'+t[1]+'"]')}));else if(a.id&&c.push("#"+a.id),(n=a.className)&&St(n))for(r=n.split(/\s+/),s=0;s<r.length;s++)c.push("."+r[s]);var l=["type","name","title","alt"];for(s=0;s<l.length;s++)o=l[s],(i=a.getAttribute(o))&&c.push("["+o+'="'+i+'"]');return c.join("")}function Nt(){var t=yt.getGlobalObject();try{return t.document.location.href}catch(t){return""}}var At=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n]);return t});var Dt=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,At(r,n.prototype),r}return lt(e,t),e}(Error),Pt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Mt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qt(t,e){void 0===e&&(e=!1);var n=t.host,r=t.path,o=t.pass,i=t.port,s=t.projectId;return t.protocol+"://"+t.publicKey+(e&&o?":"+o:"")+"@"+n+(i?":"+i:"")+"/"+(r?r+"/":r)+s}function Bt(t){return"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),{user:t.publicKey||"",protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Ut(t){var e="string"==typeof t?function(t){var e=Mt.exec(t);if(!e)throw new Dt("Invalid Sentry Dsn: "+t);var n=ft(e.slice(1),6),r=n[0],o=n[1],i=n[2],s=void 0===i?"":i,a=n[3],c=n[4],u=void 0===c?"":c,l="",p=n[5],d=p.split("/");if(d.length>1&&(l=d.slice(0,-1).join("/"),p=d.pop()),p){var f=p.match(/^\d+/);f&&(p=f[0])}return Bt({host:a,pass:s,path:l,projectId:p,port:u,protocol:r,publicKey:o})}(t):Bt(t);return function(t){if(Pt){var e=t.port,n=t.projectId,r=t.protocol;if(["protocol","publicKey","host","projectId"].forEach((function(e){if(!t[e])throw new Dt("Invalid Sentry Dsn: "+e+" missing")})),!n.match(/^\d+$/))throw new Dt("Invalid Sentry Dsn: Invalid projectId "+n);if(!function(t){return"http"===t||"https"===t}(r))throw new Dt("Invalid Sentry Dsn: Invalid protocol "+r);if(e&&isNaN(parseInt(e,10)))throw new Dt("Invalid Sentry Dsn: Invalid port "+e)}}(e),e}s("k6cxq");yt=s("k6cxq");var Ft,zt=(yt=s("k6cxq")).getGlobalObject(),Ht=["debug","info","warn","error","log","assert"];function $t(t){var e=yt.getGlobalObject();if(!("console"in e))return t();var n=e.console,r={};Ht.forEach((function(t){var o=n[t]&&n[t].__sentry_original__;t in e.console&&o&&(r[t]=n[t],n[t]=o)}));try{return t()}finally{Object.keys(r).forEach((function(t){n[t]=r[t]}))}}function Gt(){var t=!1,e={enable:function(){t=!0},disable:function(){t=!1}};return Pt?Ht.forEach((function(n){e[n]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t&&$t((function(){var t;(t=zt.console)[n].apply(t,ht(["Sentry Logger ["+n+"]:"],e))}))}})):Ht.forEach((function(t){e[t]=function(){}})),e}function Wt(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function Yt(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var o=t[r];try{n.push(String(o))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function Kt(t,e){return!!St(t)&&(wt(e,"RegExp")?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}function Vt(t,e,n){if(e in t){var r=t[e],o=n(r);if("function"==typeof o)try{Jt(o,r)}catch(t){}t[e]=o}}function Xt(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function Jt(t,e){var n=e.prototype||{};t.prototype=e.prototype=n,Xt(t,"__sentry_original__",e)}function Zt(t){return t.__sentry_original__}function Qt(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}function te(t){var e=t;if(bt(t))e=pt({message:t.message,name:t.name,stack:t.stack},ne(t));else if(Ct(t)){var n=t;e=pt({type:n.type,target:ee(n.target),currentTarget:ee(n.currentTarget)},ne(n)),"undefined"!=typeof CustomEvent&&jt(t,CustomEvent)&&(e.detail=n.detail)}return e}function ee(t){try{return e=t,"undefined"!=typeof Element&&jt(e,Element)?It(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}var e}function ne(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function re(t,e){void 0===e&&(e=40);var n=Object.keys(te(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Wt(n[0],e);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>e))return r===n.length?o:Wt(o,e)}return""}function oe(t){var e,n;if(Tt(t)){var r={};try{for(var o=dt(Object.keys(t)),i=o.next();!i.done;i=o.next()){var s=i.value;void 0!==t[s]&&(r[s]=oe(t[s]))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return Array.isArray(t)?t.map(oe):t}Ft=Pt?yt.getGlobalSingleton("logger",Gt):Gt();function ie(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.sort((function(t,e){return t[0]-e[0]})).map((function(t){return t[1]}));return function(t,e){var r,o,i,s;void 0===e&&(e=0);var a=[];try{for(var c=dt(t.split("\n").slice(e)),u=c.next();!u.done;u=c.next()){var l=u.value;try{for(var p=(i=void 0,dt(n)),d=p.next();!d.done;d=p.next()){var f=(0,d.value)(l);if(f){a.push(f);break}}}catch(t){i={error:t}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}return se(a)}}function se(t){if(!t.length)return[];var e=t,n=e[0].function||"",r=e[e.length-1].function||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,50).map((function(t){return pt(pt({},t),{filename:t.filename||e[0].filename,function:t.function||"?"})})).reverse()}function ae(t){try{return t&&"function"==typeof t&&t.name||"<anonymous>"}catch(t){return"<anonymous>"}}function ce(){if(!("fetch"in yt.getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function ue(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function le(){if(!ce())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var pe,de=(yt=s("k6cxq")).getGlobalObject(),fe={},he={};function ge(t){if(!he[t])switch(he[t]=!0,t){case"console":!function(){if(!("console"in de))return;Ht.forEach((function(t){t in de.console&&Vt(de.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];me("console",{args:n,level:t}),e&&e.apply(de.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in de))return;var t=me.bind(null,"dom"),e=ke(t,!0);de.document.addEventListener("click",e,!1),de.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((function(e){var n=de[e]&&de[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Vt(n,"addEventListener",(function(e){return function(n,r,o){if("click"===n||"keypress"==n)try{var i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},a=s[n]=s[n]||{refCount:0};if(!a.handler){var c=ke(t);a.handler=c,e.call(this,n,c,o)}a.refCount+=1}catch(t){}return e.call(this,n,r,o)}})),Vt(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{var o=this,i=o.__sentry_instrumentation_handlers__||{},s=i[e];s&&(s.refCount-=1,s.refCount<=0&&(t.call(this,e,s.handler,r),s.handler=void 0,delete i[e]),0===Object.keys(i).length&&delete o.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in de))return;var t=XMLHttpRequest.prototype;Vt(t,"open",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o=e[1],i=r.__sentry_xhr__={method:St(e[0])?e[0].toUpperCase():e[0],url:e[1]};St(o)&&"POST"===i.method&&o.match(/sentry_key/)&&(r.__sentry_own_request__=!0);var s=function(){if(4===r.readyState){try{i.status_code=r.status}catch(t){}me("xhr",{args:e,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?Vt(r,"onreadystatechange",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(),t.apply(r,e)}})):r.addEventListener("readystatechange",s),t.apply(r,e)}})),Vt(t,"send",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.__sentry_xhr__&&void 0!==e[0]&&(this.__sentry_xhr__.body=e[0]),me("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}();break;case"fetch":!function(){if(!function(){if(!ce())return!1;var t=yt.getGlobalObject();if(ue(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=ue(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){Pt&&Ft.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;Vt(de,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:ye(e),url:_e(e)},startTimestamp:Date.now()};return me("fetch",pt({},r)),t.apply(de,e).then((function(t){return me("fetch",pt(pt({},r),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw me("fetch",pt(pt({},r),{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(!function(){var t=yt.getGlobalObject(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!n&&r}())return;var t=de.onpopstate;function e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var o=pe,i=String(r);pe=i,me("history",{from:o,to:i})}return t.apply(this,e)}}de.onpopstate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=de.location.href,o=pe;if(pe=r,me("history",{from:o,to:r}),t)try{return t.apply(this,e)}catch(t){}},Vt(de.history,"pushState",e),Vt(de.history,"replaceState",e)}();break;case"error":xe=de.onerror,de.onerror=function(t,e,n,r,o){return me("error",{column:r,error:o,line:n,msg:t,url:e}),!!xe&&xe.apply(this,arguments)};break;case"unhandledrejection":Ee=de.onunhandledrejection,de.onunhandledrejection=function(t){return me("unhandledrejection",t),!Ee||Ee.apply(this,arguments)};break;default:return void(Pt&&Ft.warn("unknown instrumentation type:",t))}}function ve(t,e){fe[t]=fe[t]||[],fe[t].push(e),ge(t)}function me(t,e){var n,r;if(t&&fe[t])try{for(var o=dt(fe[t]||[]),i=o.next();!i.done;i=o.next()){var s=i.value;try{s(e)}catch(e){Pt&&Ft.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+ae(s)+"\nError:",e)}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function ye(t){return void 0===t&&(t=[]),"Request"in de&&jt(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function _e(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in de&&jt(t[0],Request)?t[0].url:String(t[0])}var be,we;function ke(t,e){return void 0===e&&(e=!1),function(n){if(n&&we!==n&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===be||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(we,n))&&(t({event:n,name:r,global:e}),we=n),clearTimeout(be),be=de.setTimeout((function(){be=void 0}),1e3)}}}var xe=null;var Ee=null;yt=s("k6cxq");function Se(){var t=yt.getGlobalObject(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function Oe(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function Te(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Ce(t){var e=t.message,n=t.event_id;if(e)return e;var r=Te(t);return r?r.type&&r.value?r.type+": "+r.value:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Le(t,e,n){var r=t.exception=t.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=e||""),i.type||(i.type=n||"Error")}function je(t,e){var n=Te(t);if(n){var r=n.mechanism;if(n.mechanism=pt(pt(pt({},{type:"generic",handled:!0}),r),e),e&&"data"in e){var o=pt(pt({},r&&r.data),e.data);n.mechanism.data=o}}}function Ie(t){if(t&&t.__sentry_captured__)return!0;try{Xt(t,"__sentry_captured__",!0)}catch(t){}return!1}var Re=s("gL7ev");function Ne(t,e,n){void 0===e&&(e=1/0),void 0===n&&(n=1/0);try{return De("",t,e,n)}catch(t){return{ERROR:"**non-serializable** ("+t+")"}}}function Ae(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r,o=Ne(t,e);return r=o,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(r))>n?Ae(t,e-1,n):o}function De(e,n,r,o,i){var s,a;void 0===r&&(r=1/0),void 0===o&&(o=1/0),void 0===i&&(s="function"==typeof WeakSet,a=s?new WeakSet:[],i=[function(t){if(s)return!!a.has(t)||(a.add(t),!1);for(var e=0;e<a.length;e++)if(a[e]===t)return!0;return a.push(t),!1},function(t){if(s)a.delete(t);else for(var e=0;e<a.length;e++)if(a[e]===t){a.splice(e,1);break}}]);var c,u=ft(i,2),l=u[0],p=u[1],d=n;if(d&&"function"==typeof d.toJSON)try{return d.toJSON()}catch(t){}if(null===n||["number","boolean","string"].includes(typeof n)&&("number"!=typeof(c=n)||c==c))return n;var f=function(e,n){try{return"domain"===e&&n&&"object"==typeof n&&n._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==t&&n===t?"[Global]":"undefined"!=typeof window&&n===window?"[Window]":"undefined"!=typeof document&&n===document?"[Document]":function(t){return Tt(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}(n)?"[SyntheticEvent]":"number"==typeof n&&n!=n?"[NaN]":void 0===n?"[undefined]":"function"==typeof n?"[Function: "+ae(n)+"]":"symbol"==typeof n?"["+String(n)+"]":"bigint"==typeof n?"[BigInt: "+String(n)+"]":"[object "+Object.getPrototypeOf(n).constructor.name+"]"}catch(t){return"**non-serializable** ("+t+")"}}(e,n);if(!f.startsWith("[object "))return f;if(0===r)return f.replace("object ","");if(l(n))return"[Circular ~]";var h=Array.isArray(n)?[]:{},g=0,v=bt(n)||Ct(n)?te(n):n;for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m)){if(g>=o){h[m]="[MaxProperties ~]";break}var y=v[m];h[m]=De(m,y,r-1,o,i),g+=1}return p(n),h}function Pe(t){return new Be((function(e){e(t)}))}function Me(t){return new Be((function(e,n){n(t)}))}var qe,Be=function(){function t(t){var e=this;this._state=0,this._handlers=[],this._resolve=function(t){e._setResult(1,t)},this._reject=function(t){e._setResult(2,t)},this._setResult=function(t,n){0===e._state&&(Lt(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._executeHandlers=function(){if(0!==e._state){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t[0]||(1===e._state&&t[1](e._value),2===e._state&&t[2](e._value),t[0]=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.prototype.then=function(e,n){var r=this;return new t((function(t,o){r._handlers.push([!1,function(n){if(e)try{t(e(n))}catch(t){o(t)}else t(n)},function(e){if(n)try{t(n(e))}catch(t){o(t)}else o(e)}]),r._executeHandlers()}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var o,i;return n.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?r(o):t(o)}))}))},t}();function Ue(t){var e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(r){if(!(void 0===t||e.length<t))return Me(new Dt("Not adding Promise due to buffer limit reached."));var o=r();return-1===e.indexOf(o)&&e.push(o),o.then((function(){return n(o)})).then(null,(function(){return n(o).then(null,(function(){}))})),o},drain:function(t){return new Be((function(n,r){var o=e.length;if(!o)return n(!0);var i=setTimeout((function(){t&&t>0&&n(!1)}),t);e.forEach((function(t){Pe(t).then((function(){--o||(clearTimeout(i),n(!0))}),r)}))}))}}}!function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(qe||(qe={}));var Fe=["fatal","error","warning","log","info","debug","critical"];function ze(t){return"warn"===t?qe.Warning:function(t){return-1!==Fe.indexOf(t)}(t)?t:qe.Log}function He(t){return t>=200&&t<300?"success":429===t?"rate_limit":t>=400&&t<500?"invalid":t>=500?"failed":"unknown"}var $e=s("3Wlpk");function Ge(t,e){return void 0===e&&(e=[]),[t,e]}function We(t){var e=ft(t,2),n=ft(e[1],1);return ft(n[0],1)[0].type}function Ye(t){var e=ft(t,2),n=e[0],r=e[1],o=JSON.stringify(n);return r.reduce((function(t,e){var n=ft(e,2),r=n[0],o=n[1],i=Ot(o)?String(o):JSON.stringify(o);return t+"\n"+JSON.stringify(r)+"\n"+i}),o)}$e=s("3Wlpk");function Ke(t,e,n){return Ge(e?{dsn:e}:{},[[{type:"client_report"},{timestamp:n||$e.dateTimestampInSeconds(),discarded_events:t}]])}var Ve;function Xe(t,e){return t[e]||t.all||0}function Je(t,e,n){return void 0===n&&(n=Date.now()),Xe(t,e)>n}function Ze(t,e,n){var r,o,i,s;void 0===n&&(n=Date.now());var a=pt({},t),c=e["x-sentry-rate-limits"],u=e["retry-after"];if(c)try{for(var l=dt(c.trim().split(",")),p=l.next();!p.done;p=l.next()){var d=p.value.split(":",2),f=parseInt(d[0],10),h=1e3*(isNaN(f)?60:f);if(d[1])try{for(var g=(i=void 0,dt(d[1].split(";"))),v=g.next();!v.done;v=g.next()){a[v.value]=n+h}}catch(t){i={error:t}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}else a.all=n+h}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}else u&&(a.all=n+function(t,e){void 0===e&&(e=Date.now());var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}(u,n));return a}r(vt,Re),r(vt,$e);var Qe=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Ve=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zt(this)||this;return Ve.apply(n,t)}},t.id="FunctionToString",t}(),tn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,en=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],nn=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(e,n){e((function(e){var r=n();if(r){var o=r.getIntegration(t);if(o){var i=r.getClient(),s=i?i.getOptions():{},a=function(t,e){void 0===t&&(t={});void 0===e&&(e={});return{allowUrls:ht(t.whitelistUrls||[],t.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:ht(t.blacklistUrls||[],t.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:ht(t.ignoreErrors||[],e.ignoreErrors||[],en),ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(o._options,s);return function(t,e){if(e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return tn&&Ft.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Ce(t)),!0;if(function(t,e){return!(!e||!e.length)&&function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=void 0===n?"":n,o=e.value,i=void 0===o?"":o;return[""+i,r+": "+i]}catch(e){return tn&&Ft.error("Cannot extract message for event "+Ce(t)),[]}return[]}(t).some((function(t){return e.some((function(e){return Kt(t,e)}))}))}(t,e.ignoreErrors))return tn&&Ft.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Ce(t)),!0;if(function(t,e){if(!e||!e.length)return!1;var n=on(t);return!!n&&e.some((function(t){return Kt(n,t)}))}(t,e.denyUrls))return tn&&Ft.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Ce(t)+".\nUrl: "+on(t)),!0;if(!function(t,e){if(!e||!e.length)return!0;var n=on(t);return!n||e.some((function(t){return Kt(n,t)}))}(t,e.allowUrls))return tn&&Ft.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Ce(t)+".\nUrl: "+on(t)),!0;return!1}(e,a)?null:e}}return e}))},t.id="InboundFilters",t}();function rn(t){void 0===t&&(t=[]);for(var e=t.length-1;e>=0;e--){var n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}function on(t){try{if(t.stacktrace)return rn(t.stacktrace.frames);var e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?rn(e):null}catch(e){return tn&&Ft.error("Cannot extract url for event "+Ce(t)),null}}$e=s("3Wlpk"),yt=s("k6cxq");var sn=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=ht(e._breadcrumbs),n._tags=pt({},e._tags),n._extra=pt({},e._extra),n._contexts=pt({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=ht(e._eventProcessors),n._requestSession=e._requestSession),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.getRequestSession=function(){return this._requestSession},t.prototype.setRequestSession=function(t){return this._requestSession=t,this},t.prototype.setTags=function(t){return this._tags=pt(pt({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=pt(pt({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=pt(pt({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=pt(pt({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=pt(pt({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t=this.getSpan();return t&&t.transaction},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=pt(pt({},this._tags),e._tags),this._extra=pt(pt({},this._extra),e._extra),this._contexts=pt(pt({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Tt(e)&&(this._tags=pt(pt({},this._tags),e.tags),this._extra=pt(pt({},this._extra),e.extra),this._contexts=pt(pt({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n="number"==typeof e?Math.min(e,100):100;if(n<=0)return this;var r=pt({timestamp:$e.dateTimestampInSeconds()},t);return this._breadcrumbs=ht(this._breadcrumbs,[r]).slice(-n),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){if(this._extra&&Object.keys(this._extra).length&&(t.extra=pt(pt({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=pt(pt({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=pt(pt({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=pt(pt({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=pt({trace:this._span.getTraceContext()},t.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(t.tags=pt({transaction:n},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=ht(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(ht(an(),this._eventProcessors),t,e)},t.prototype.setSDKProcessingMetadata=function(t){return this._sdkProcessingMetadata=pt(pt({},this._sdkProcessingMetadata),t),this},t.prototype._notifyEventProcessors=function(t,e,n,r){var o=this;return void 0===r&&(r=0),new Be((function(i,s){var a=t[r];if(null===e||"function"!=typeof a)i(e);else{var c=a(pt({},e),n);Lt(c)?c.then((function(e){return o._notifyEventProcessors(t,e,n,r+1).then(i)})).then(null,s):o._notifyEventProcessors(t,c,n,r+1).then(i).then(null,s)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function an(){return yt.getGlobalSingleton("globalEventProcessors",(function(){return[]}))}function cn(t){an().push(t)}$e=s("3Wlpk");var un=function(){function t(t){this.errors=0,this.sid=Se(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var e=$e.timestampInSeconds();this.timestamp=e,this.started=e,t&&this.update(t)}return t.prototype.update=function(t){if(void 0===t&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),this.did||t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||$e.timestampInSeconds(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=32===t.sid.length?t.sid:Se()),void 0!==t.init&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof t.duration)this.duration=t.duration;else{var e=this.timestamp-this.started;this.duration=e>=0?e:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):"ok"===this.status?this.update({status:"exited"}):this.update()},t.prototype.toJSON=function(){return oe({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},t}(),ln=($e=s("3Wlpk"),yt=s("k6cxq"),Re=s("gL7ev"),"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__),pn=function(){function t(t,e,n){void 0===e&&(e=new sn),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=e,t&&this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=sn.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=e&&e.event_id?e.event_id:Se(),r=e;if(!e){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(t){o=t}r={originalException:t,syntheticException:o}}return this._invokeClient("captureException",t,pt(pt({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=n&&n.event_id?n.event_id:Se(),o=n;if(!n){var i=void 0;try{throw new Error(t)}catch(t){i=t}o={originalException:t,syntheticException:i}}return this._invokeClient("captureMessage",t,e,pt(pt({},o),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=e&&e.event_id?e.event_id:Se();return"transaction"!==t.type&&(this._lastEventId=n),this._invokeClient("captureEvent",t,pt(pt({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,o=n.client;if(r&&o){var i=o.getOptions&&o.getOptions()||{},s=i.beforeBreadcrumb,a=void 0===s?null:s,c=i.maxBreadcrumbs,u=void 0===c?100:c;if(!(u<=0)){var l=$e.dateTimestampInSeconds(),p=pt({timestamp:l},t),d=a?$t((function(){return a(p,e)})):p;null!==d&&r.addBreadcrumb(d,u)}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=fn(this);try{t(this)}finally{fn(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return ln&&Ft.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.captureSession=function(t){if(void 0===t&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},t.prototype.endSession=function(){var t=this.getStackTop(),e=t&&t.scope,n=e&&e.getSession();n&&n.close(),this._sendSessionUpdate(),e&&e.setSession()},t.prototype.startSession=function(t){var e=this.getStackTop(),n=e.scope,r=e.client,o=r&&r.getOptions()||{},i=o.release,s=o.environment,a=(yt.getGlobalObject().navigator||{}).userAgent,c=new un(pt(pt(pt({release:i,environment:s},n&&{user:n.getUser()}),a&&{userAgent:a}),t));if(n){var u=n.getSession&&n.getSession();u&&"ok"===u.status&&u.update({status:"exited"}),this.endSession(),n.setSession(c)}return c},t.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop(),i=o.scope,s=o.client;s&&s[t]&&(e=s)[t].apply(e,ht(n,[i]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=dn(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[t])return o.extensions[t].apply(this,e);ln&&Ft.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function dn(){var t=yt.getGlobalObject();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function fn(t){var e=dn(),n=vn(e);return mn(e,t),n}function hn(){var t=dn();return gn(t)&&!vn(t).isOlderThan(4)||mn(t,new pn),Re.isNodeEnv()?function(t){try{var e=dn().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return vn(t);if(!gn(n)||vn(n).isOlderThan(4)){var r=vn(t).getStackTop();mn(n,new pn(r.client,sn.clone(r.scope)))}return vn(n)}catch(e){return vn(t)}}(t):vn(t)}function gn(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function vn(t){return yt.getGlobalSingleton("hub",(function(){return new pn}),t)}function mn(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}function yn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=hn();if(r&&r[t])return r[t].apply(r,ht(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function _n(t,e){return yn("captureException",t,{captureContext:e,originalException:t,syntheticException:new Error("Sentry syntheticException")})}function bn(t,e){var n=new Error(t);return yn("captureMessage",t,"string"==typeof e?e:void 0,pt({originalException:t,syntheticException:n},"string"!=typeof e?{captureContext:e}:void 0))}function wn(t){return yn("captureEvent",t)}function kn(t){yn("configureScope",t)}function xn(t){yn("addBreadcrumb",t)}function En(t,e){yn("setContext",t,e)}function Sn(t){yn("setExtras",t)}function On(t){yn("setTags",t)}function Tn(t,e){yn("setExtra",t,e)}function Cn(t,e){yn("setTag",t,e)}function Ln(t){yn("setUser",t)}function jn(t){yn("withScope",t)}function In(t,e){return yn("startTransaction",pt({},t),e)}!function(){function t(t,e,n){void 0===e&&(e={}),this.dsn=t,this._dsnObject=Ut(t),this.metadata=e,this._tunnel=n}t.prototype.getDsn=function(){return this._dsnObject},t.prototype.forceEnvelope=function(){return!!this._tunnel},t.prototype.getBaseApiEndpoint=function(){return Nn(this._dsnObject)},t.prototype.getStoreEndpoint=function(){return Pn(this._dsnObject)},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return Mn(this._dsnObject)},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return qn(this._dsnObject,this._tunnel)}}();function Rn(t,e,n){return{initDsn:t,metadata:e||{},dsn:Ut(t),tunnel:n}}function Nn(t){var e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"}function An(t,e){return""+Nn(t)+t.projectId+"/"+e+"/"}function Dn(t){return Qt({sentry_key:t.publicKey,sentry_version:"7"})}function Pn(t){return An(t,"store")}function Mn(t){return Pn(t)+"?"+Dn(t)}function qn(t,e){return e||function(t){return An(t,"envelope")}(t)+"?"+Dn(t)}$e=s("3Wlpk");var Bn=[];function Un(t){return t.reduce((function(t,e){return t.every((function(t){return e.name!==t.name}))&&t.push(e),t}),[])}function Fn(t){var e={};return function(t){var e=t.defaultIntegrations&&ht(t.defaultIntegrations)||[],n=t.integrations,r=ht(Un(e));Array.isArray(n)?r=ht(r.filter((function(t){return n.every((function(e){return e.name!==t.name}))})),Un(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var o=r.map((function(t){return t.name})),i="Debug";return-1!==o.indexOf(i)&&r.push.apply(r,ht(r.splice(o.indexOf(i),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===Bn.indexOf(t.name)&&(t.setupOnce(cn,hn),Bn.push(t.name),tn&&Ft.log("Integration installed: "+t.name))}(t)})),Xt(e,"initialized",!0),e}var zn=function(){function t(t,e){this._integrations={},this._numProcessing=0,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=Ut(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this;if(!Ie(t)){var o=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then((function(t){return r._captureEvent(t,e,n)})).then((function(t){o=t}))),o}tn&&Ft.log("Not capturing exception because it's already been captured.")},t.prototype.captureMessage=function(t,e,n,r){var o=this,i=n&&n.event_id,s=Ot(t)?this._getBackend().eventFromMessage(String(t),e,n):this._getBackend().eventFromException(t,n);return this._process(s.then((function(t){return o._captureEvent(t,n,r)})).then((function(t){i=t}))),i},t.prototype.captureEvent=function(t,e,n){if(!(e&&e.originalException&&Ie(e.originalException))){var r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((function(t){r=t}))),r}tn&&Ft.log("Not capturing exception because it's already been captured.")},t.prototype.captureSession=function(t){this._isEnabled()?"string"!=typeof t.release?tn&&Ft.warn("Discarded session because of missing or non-string release"):(this._sendSession(t),t.update({init:!1})):tn&&Ft.warn("SDK not enabled, will not capture session.")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.getTransport=function(){return this._getBackend().getTransport()},t.prototype.flush=function(t){var e=this;return this._isClientDoneProcessing(t).then((function(n){return e.getTransport().close(t).then((function(t){return n&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=Fn(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return tn&&Ft.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(t,e){var n,r,o=!1,i=!1,s=e.exception&&e.exception.values;if(s){i=!0;try{for(var a=dt(s),c=a.next();!c.done;c=a.next()){var u=c.value.mechanism;if(u&&!1===u.handled){o=!0;break}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var l="ok"===t.status;(l&&0===t.errors||l&&o)&&(t.update(pt(pt({},o&&{status:"crashed"}),{errors:t.errors||Number(i||o)})),this.captureSession(t))},t.prototype._sendSession=function(t){this._getBackend().sendSession(t)},t.prototype._isClientDoneProcessing=function(t){var e=this;return new Be((function(n){var r=0,o=setInterval((function(){0==e._numProcessing?(clearInterval(o),n(!0)):(r+=1,t&&r>=t&&(clearInterval(o),n(!1)))}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this,o=this.getOptions(),i=o.normalizeDepth,s=void 0===i?3:i,a=o.normalizeMaxBreadth,c=void 0===a?1e3:a,u=pt(pt({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:Se()),timestamp:t.timestamp||$e.dateTimestampInSeconds()});this._applyClientOptions(u),this._applyIntegrationsMetadata(u);var l=e;n&&n.captureContext&&(l=sn.clone(l).update(n.captureContext));var p=Pe(u);return l&&(p=l.applyToEvent(u,n)),p.then((function(t){return t&&(t.sdkProcessingMetadata=pt(pt({},t.sdkProcessingMetadata),{normalizeDepth:Ne(s)+" ("+typeof s+")"})),"number"==typeof s&&s>0?r._normalizeEvent(t,s,c):t}))},t.prototype._normalizeEvent=function(t,e,n){if(!t)return null;var r=pt(pt(pt(pt(pt({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return pt(pt({},t),t.data&&{data:Ne(t.data,e,n)})}))}),t.user&&{user:Ne(t.user,e,n)}),t.contexts&&{contexts:Ne(t.contexts,e,n)}),t.extra&&{extra:Ne(t.extra,e,n)});return t.contexts&&t.contexts.trace&&(r.contexts.trace=t.contexts.trace),r.sdkProcessingMetadata=pt(pt({},r.sdkProcessingMetadata),{baseClientNormalized:!0}),r},t.prototype._applyClientOptions=function(t){var e=this.getOptions(),n=e.environment,r=e.release,o=e.dist,i=e.maxValueLength,s=void 0===i?250:i;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=Wt(t.message,s));var a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=Wt(a.value,s));var c=t.request;c&&c.url&&(c.url=Wt(c.url,s))},t.prototype._applyIntegrationsMetadata=function(t){var e=Object.keys(this._integrations);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=ht(t.sdk.integrations||[],e))},t.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},t.prototype._captureEvent=function(t,e,n){return this._processEvent(t,e,n).then((function(t){return t.event_id}),(function(t){tn&&Ft.error(t)}))},t.prototype._processEvent=function(t,e,n){var r=this,o=this.getOptions(),i=o.beforeSend,s=o.sampleRate,a=this.getTransport();function c(t,e){a.recordLostEvent&&a.recordLostEvent(t,e)}if(!this._isEnabled())return Me(new Dt("SDK not enabled, will not capture event."));var u="transaction"===t.type;return!u&&"number"==typeof s&&Math.random()>s?(c("sample_rate","event"),Me(new Dt("Discarding event because it's not included in the random sample (sampling rate = "+s+")"))):this._prepareEvent(t,n,e).then((function(n){if(null===n)throw c("event_processor",t.type||"event"),new Dt("An event processor returned null, will not send event.");return e&&e.data&&!0===e.data.__sentry__||u||!i?n:function(t){var e="`beforeSend` method has to return `null` or a valid event.";if(Lt(t))return t.then((function(t){if(!Tt(t)&&null!==t)throw new Dt(e);return t}),(function(t){throw new Dt("beforeSend rejected with "+t)}));if(!Tt(t)&&null!==t)throw new Dt(e);return t}(i(n,e))})).then((function(e){if(null===e)throw c("before_send",t.type||"event"),new Dt("`beforeSend` returned `null`, will not send event.");var o=n&&n.getSession&&n.getSession();return!u&&o&&r._updateSessionFromEvent(o,e),r._sendEvent(e),e})).then(null,(function(t){if(t instanceof Dt)throw t;throw r.captureException(t,{data:{__sentry__:!0},originalException:t}),new Dt("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype._process=function(t){var e=this;this._numProcessing+=1,t.then((function(t){return e._numProcessing-=1,t}),(function(t){return e._numProcessing-=1,t}))},t}();function Hn(t){if(t.metadata&&t.metadata.sdk){var e=t.metadata.sdk;return{name:e.name,version:e.version}}}function $n(t,e){return e?(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=ht(t.sdk.integrations||[],e.integrations||[]),t.sdk.packages=ht(t.sdk.packages||[],e.packages||[]),t):t}function Gn(t,e){var n=Hn(e),r="aggregates"in t?"sessions":"session";return[Ge(pt(pt({sent_at:(new Date).toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:qt(e.dsn)}),[[{type:r},t]]),r]}var Wn=function(){function t(){}return t.prototype.sendEvent=function(t){return Pe({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},t.prototype.close=function(t){return Pe(!0)},t}(),Yn=function(){function t(t){this._options=t,this._options.dsn||tn&&Ft.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(t,e){throw new Dt("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new Dt("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var e=function(t,e){var n=Hn(e),r=t.type||"event",o=(t.sdkProcessingMetadata||{}).transactionSampling||{},i=o.method,s=o.rate;return $n(t,e.metadata.sdk),t.tags=t.tags||{},t.extra=t.extra||{},t.sdkProcessingMetadata&&t.sdkProcessingMetadata.baseClientNormalized||(t.tags.skippedNormalization=!0,t.extra.normalizeDepth=t.sdkProcessingMetadata?t.sdkProcessingMetadata.normalizeDepth:"unset"),delete t.sdkProcessingMetadata,Ge(pt(pt({event_id:t.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),!!e.tunnel&&{dsn:qt(e.dsn)}),[[{type:r,sample_rates:[{id:i,rate:s}]},t]])}(t,Rn(this._options.dsn,this._options._metadata,this._options.tunnel));this._newTransport.send(e).then(null,(function(t){tn&&Ft.error("Error while sending event:",t)}))}else this._transport.sendEvent(t).then(null,(function(t){tn&&Ft.error("Error while sending event:",t)}))},t.prototype.sendSession=function(t){if(this._transport.sendSession)if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var e=ft(Gn(t,Rn(this._options.dsn,this._options._metadata,this._options.tunnel)),1)[0];this._newTransport.send(e).then(null,(function(t){tn&&Ft.error("Error while sending session:",t)}))}else this._transport.sendSession(t).then(null,(function(t){tn&&Ft.error("Error while sending session:",t)}));else tn&&Ft.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new Wn},t}();function Kn(t,e,n){void 0===n&&(n=Ue(t.bufferSize||30));var r={};return{send:function(t){var o=We(t),i="event"===o?"error":o,s={category:i,body:Ye(t)};return Je(r,i)?Me({status:"rate_limit",reason:Vn(r,i)}):n.add((function(){return e(s).then((function(t){var e=t.body,n=t.headers,o=t.reason,s=He(t.statusCode);return n&&(r=Ze(r,n)),"success"===s?Pe({status:s,reason:o}):Me({status:s,reason:o||e||("rate_limit"===s?Vn(r,i):"Unknown transport error")})}))}))},flush:function(t){return n.drain(t)}}}function Vn(t,e){return"Too many "+e+" requests, backing off until: "+new Date(Xe(t,e)).toISOString()}yt=s("k6cxq");var Xn={};e(Xn,"GlobalHandlers",(function(){return Tr})),e(Xn,"TryCatch",(function(){return Ar})),e(Xn,"Breadcrumbs",(function(){return Br})),e(Xn,"LinkedErrors",(function(){return $r})),e(Xn,"UserAgent",(function(){return Yr})),e(Xn,"Dedupe",(function(){return Kr}));function Jn(t,e,n,r){var o={filename:t,function:e,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}var Zn=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Qn=/\((\S*)(?::(\d+))(?::(\d+))\)/,tr=[30,function(t){var e=Zn.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){var n=Qn.exec(e[2]);n&&(e[2]=n[1],e[3]=n[2],e[4]=n[3])}var r=ft(lr(e[1]||"?",e[2]),2),o=r[0];return Jn(r[1],o,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],er=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,nr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rr=[50,function(t){var e,n=er.exec(t);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var r=nr.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}var o=n[3],i=n[1]||"?";return i=(e=ft(lr(i,o),2))[0],Jn(o=e[1],i,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}}],or=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ir=[40,function(t){var e=or.exec(t);return e?Jn(e[2],e[1]||"?",+e[3],e[4]?+e[4]:void 0):void 0}],sr=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ar=[10,function(t){var e=sr.exec(t);return e?Jn(e[2],e[3]||"?",+e[1]):void 0}],cr=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,ur=[20,function(t){var e=cr.exec(t);return e?Jn(e[5],e[3]||e[4]||"?",+e[1],+e[2]):void 0}],lr=function(t,e){var n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:"?",n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};function pr(t){var e=fr(t),n={type:t&&t.name,value:gr(t)};return e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function dr(t){return{exception:{values:[pr(t)]}}}function fr(t){var e=t.stacktrace||t.stack||"",n=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(hr.test(t.message))return 1}return 0}(t);try{return ie(ar,ur,tr,ir,rr)(e,n)}catch(t){}return[]}var hr=/Minified React error #\d+;/i;function gr(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function vr(t,e,n){var r=yr(t,e&&e.syntheticException||void 0,n);return je(r),r.level=qe.Error,e&&e.event_id&&(r.event_id=e.event_id),Pe(r)}function mr(t,e,n,r){void 0===e&&(e=qe.Info);var o=_r(t,n&&n.syntheticException||void 0,r);return o.level=e,n&&n.event_id&&(o.event_id=n.event_id),Pe(o)}function yr(t,e,n,r){var o;if(kt(t)&&t.error)return dr(t.error);if(xt(t)||Et(t)){var i=t;if("stack"in t)o=dr(t);else{var s=i.name||(xt(i)?"DOMError":"DOMException"),a=i.message?s+": "+i.message:s;Le(o=_r(a,e,n),a)}return"code"in i&&(o.tags=pt(pt({},o.tags),{"DOMException.code":""+i.code})),o}return bt(t)?dr(t):Tt(t)||Ct(t)?(o=function(t,e,n){var r={exception:{values:[{type:Ct(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+re(t)}]},extra:{__serialized__:Ae(t)}};if(e){var o=fr(e);o.length&&(r.stacktrace={frames:o})}return r}(t,e,r),je(o,{synthetic:!0}),o):(Le(o=_r(t,e,n),""+t,void 0),je(o,{synthetic:!0}),o)}function _r(t,e,n){var r={message:t};if(n&&e){var o=fr(e);o.length&&(r.stacktrace={frames:o})}return r}var br="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,wr=(yt=s("k6cxq")).getGlobalObject(),kr=0;function xr(){return kr>0}function Er(){kr+=1,setTimeout((function(){kr-=1}))}function Sr(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{var r=t.__sentry_wrapped__;if(r)return r;if(Zt(t))return t}catch(e){return t}var o=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var o=r.map((function(t){return Sr(t,e)}));return t.apply(this,o)}catch(t){throw Er(),jn((function(n){n.addEventProcessor((function(t){return e.mechanism&&(Le(t,void 0,void 0),je(t,e.mechanism)),t.extra=pt(pt({},t.extra),{arguments:r}),t})),_n(t)})),t}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}catch(t){}Jt(o,t),Xt(t,"__sentry_wrapped__",o);try{Object.getOwnPropertyDescriptor(o,"name").configurable&&Object.defineProperty(o,"name",{get:function(){return t.name}})}catch(t){}return o}function Or(t){if(void 0===t&&(t={}),wr.document)if(t.eventId)if(t.dsn){var e=wr.document.createElement("script");e.async=!0,e.src=function(t,e){var n=Ut(t),r=Nn(n)+"embed/error-page/",o="dsn="+qt(n);for(var i in e)if("dsn"!==i)if("user"===i){if(!e.user)continue;e.user.name&&(o+="&name="+encodeURIComponent(e.user.name)),e.user.email&&(o+="&email="+encodeURIComponent(e.user.email))}else o+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i]);return r+"?"+o}(t.dsn,t),t.onLoad&&(e.onload=t.onLoad);var n=wr.document.head||wr.document.body;n&&n.appendChild(e)}else br&&Ft.error("Missing dsn option in showReportDialog call");else br&&Ft.error("Missing eventId option in showReportDialog call")}var Tr=function(){function t(e){this.name=t.id,this._installFunc={onerror:Cr,onunhandledrejection:Lr},this._options=pt({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50;var t,e=this._options;for(var n in e){var r=this._installFunc[n];r&&e[n]&&(t=n,br&&Ft.log("Global Handler attached: "+t),r(),this._installFunc[n]=void 0)}},t.id="GlobalHandlers",t}();function Cr(){ve("error",(function(t){var e=ft(Rr(),2),n=e[0],r=e[1];if(n.getIntegration(Tr)){var o=t.msg,i=t.url,s=t.line,a=t.column,c=t.error;if(!(xr()||c&&c.__sentry_own_request__)){var u=void 0===c&&St(o)?function(t,e,n,r){var o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,i=kt(t)?t.message:t,s="Error",a=i.match(o);a&&(s=a[1],i=a[2]);return jr({exception:{values:[{type:s,value:i}]}},e,n,r)}(o,i,s,a):jr(yr(c||o,void 0,r,!1),i,s,a);u.level=qe.Error,Ir(n,c,u,"onerror")}}}))}function Lr(){ve("unhandledrejection",(function(t){var e=ft(Rr(),2),n=e[0],r=e[1];if(n.getIntegration(Tr)){var o=t;try{"reason"in t?o=t.reason:"detail"in t&&"reason"in t.detail&&(o=t.detail.reason)}catch(t){}if(xr()||o&&o.__sentry_own_request__)return!0;var i=Ot(o)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(o)}]}}:yr(o,void 0,r,!0);i.level=qe.Error,Ir(n,o,i,"onunhandledrejection")}}))}function jr(t,e,n,r){var o=t.exception=t.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,p=St(e)&&e.length>0?e:Nt();return 0===c.length&&c.push({colno:u,filename:p,function:"?",in_app:!0,lineno:l}),t}function Ir(t,e,n,r){je(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function Rr(){var t=hn(),e=t.getClient();return[t,e&&e.getOptions().attachStacktrace]}yt=s("k6cxq");var Nr=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ar=function(){function t(e){this.name=t.id,this._options=pt({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=yt.getGlobalObject();this._options.setTimeout&&Vt(t,"setTimeout",Dr),this._options.setInterval&&Vt(t,"setInterval",Dr),this._options.requestAnimationFrame&&Vt(t,"requestAnimationFrame",Pr),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&Vt(XMLHttpRequest.prototype,"send",Mr);var e=this._options.eventTarget;e&&(Array.isArray(e)?e:Nr).forEach(qr)},t.id="TryCatch",t}();function Dr(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Sr(r,{mechanism:{data:{function:ae(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function Pr(t){return function(e){return t.apply(this,[Sr(e,{mechanism:{data:{function:"requestAnimationFrame",handler:ae(t)},handled:!0,type:"instrument"}})])}}function Mr(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(t){t in r&&"function"==typeof r[t]&&Vt(r,t,(function(e){var n={mechanism:{data:{function:t,handler:ae(e)},handled:!0,type:"instrument"}},r=Zt(e);return r&&(n.mechanism.data.handler=ae(r)),Sr(e,n)}))})),t.apply(this,e)}}function qr(t){var e=yt.getGlobalObject(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Vt(n,"addEventListener",(function(e){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Sr(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:ae(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.apply(this,[n,Sr(r,{mechanism:{data:{function:"addEventListener",handler:ae(r),target:t},handled:!0,type:"instrument"}}),o])}})),Vt(n,"removeEventListener",(function(t){return function(e,n,r){var o=n;try{var i=o&&o.__sentry_wrapped__;i&&t.call(this,e,i,r)}catch(t){}return t.call(this,e,o,r)}})))}yt=s("k6cxq");var Br=function(){function t(e){this.name=t.id,this._options=pt({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&hn().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Ce(t)},{event:t})},t.prototype.setupOnce=function(){this._options.console&&ve("console",Ur),this._options.dom&&ve("dom",function(t){function e(e){var n,r="object"==typeof t?t.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=e.event.target?It(e.event.target,r):It(e.event,r)}catch(t){n="<unknown>"}0!==n.length&&hn().addBreadcrumb({category:"ui."+e.name,message:n},{event:e.event,name:e.name,global:e.global})}return e}(this._options.dom)),this._options.xhr&&ve("xhr",Fr),this._options.fetch&&ve("fetch",zr),this._options.history&&ve("history",Hr)},t.id="Breadcrumbs",t}();function Ur(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:ze(t.level),message:Yt(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(Yt(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}hn().addBreadcrumb(e,{input:t.args,level:t.level})}function Fr(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,o=e.status_code,i=e.body;hn().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:t.xhr,input:i})}else;}function zr(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?hn().addBreadcrumb({category:"fetch",data:t.fetchData,level:qe.Error,type:"http"},{data:t.error,input:t.args}):hn().addBreadcrumb({category:"fetch",data:pt(pt({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))}function Hr(t){var e=yt.getGlobalObject(),n=t.from,r=t.to,o=Oe(e.location.href),i=Oe(n),s=Oe(r);i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),hn().addBreadcrumb({category:"navigation",data:{from:n,to:r}})}var $r=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){cn((function(e,n){var r=hn().getIntegration(t);return r?function(t,e,n,r){if(!(n.exception&&n.exception.values&&r&&jt(r.originalException,Error)))return n;var o=Gr(e,r.originalException,t);return n.exception.values=ht(o,n.exception.values),n}(r._key,r._limit,e,n):e}))},t.id="LinkedErrors",t}();function Gr(t,e,n,r){if(void 0===r&&(r=[]),!jt(e[n],Error)||r.length+1>=t)return r;var o=pr(e[n]);return Gr(t,e[n],n,ht([o],r))}var Wr=(yt=s("k6cxq")).getGlobalObject(),Yr=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){cn((function(e){if(hn().getIntegration(t)){if(!Wr.navigator&&!Wr.location&&!Wr.document)return e;var n=e.request&&e.request.url||Wr.location&&Wr.location.href,r=(Wr.document||{}).referrer,o=(Wr.navigator||{}).userAgent,i=pt(pt(pt({},e.request&&e.request.headers),r&&{Referer:r}),o&&{"User-Agent":o}),s=pt(pt({},n&&{url:n}),{headers:i});return pt(pt({},e),{request:s})}return e}))},t.id="UserAgent",t}(),Kr=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(e,n){e((function(e){var r=n().getIntegration(t);if(r){try{if(function(t,e){return!!e&&(!!function(t,e){var n=t.message,r=e.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!Xr(t,e)&&!!Vr(t,e))))}(t,e)||!!function(t,e){var n=Jr(e),r=Jr(t);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!Xr(t,e)&&!!Vr(t,e)))}(t,e))}(e,r._previousEvent))return br&&Ft.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e}))},t.id="Dedupe",t}();function Vr(t,e){var n=Zr(t),r=Zr(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function Xr(t,e){var n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function Jr(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Zr(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}else if(t.stacktrace)return t.stacktrace.frames}var Qr={};e(Qr,"BaseTransport",(function(){return io})),e(Qr,"FetchTransport",(function(){return so})),e(Qr,"XHRTransport",(function(){return ao})),e(Qr,"makeNewFetchTransport",(function(){return co})),e(Qr,"makeNewXHRTransport",(function(){return uo}));yt=s("k6cxq");var to,eo=(yt=s("k6cxq")).getGlobalObject();function no(){if(to)return to;if(ue(eo.fetch))return to=eo.fetch.bind(eo);var t=eo.document,e=eo.fetch;if(t&&"function"==typeof t.createElement)try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);var r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(t){br&&Ft.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return to=e.bind(eo)}function ro(t){return"event"===t?"error":t}var oo=yt.getGlobalObject(),io=function(){function t(t){var e=this;this.options=t,this._buffer=Ue(30),this._rateLimits={},this._outcomes={},this._api=Rn(t.dsn,t._metadata,t.tunnel),this.url=Mn(this._api.dsn),this.options.sendClientReports&&oo.document&&oo.document.addEventListener("visibilitychange",(function(){"hidden"===oo.document.visibilityState&&e._flushOutcomes()}))}return t.prototype.sendEvent=function(t){return this._sendRequest(function(t,e){var n,r=Hn(e),o=t.type||"event",i="transaction"===o||!!e.tunnel,s=(t.sdkProcessingMetadata||{}).transactionSampling||{},a=s.method,c=s.rate;$n(t,e.metadata.sdk),t.tags=t.tags||{},t.extra=t.extra||{},t.sdkProcessingMetadata&&t.sdkProcessingMetadata.baseClientNormalized||(t.tags.skippedNormalization=!0,t.extra.normalizeDepth=t.sdkProcessingMetadata?t.sdkProcessingMetadata.normalizeDepth:"unset"),delete t.sdkProcessingMetadata;try{n=JSON.stringify(t)}catch(e){t.tags.JSONStringifyError=!0,t.extra.JSONStringifyError=e;try{n=JSON.stringify(Ne(t))}catch(t){var u=t;n=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:u.message,stack:u.stack}})}}var l={body:n,type:o,url:i?qn(e.dsn,e.tunnel):Mn(e.dsn)};if(i){var p=Ge(pt(pt({event_id:t.event_id,sent_at:(new Date).toISOString()},r&&{sdk:r}),!!e.tunnel&&{dsn:qt(e.dsn)}),[[{type:o,sample_rates:[{id:a,rate:c}]},l.body]]);l.body=Ye(p)}return l}(t,this._api),t)},t.prototype.sendSession=function(t){return this._sendRequest(function(t,e){var n=ft(Gn(t,e),2),r=n[0],o=n[1];return{body:Ye(r),type:o,url:qn(e.dsn,e.tunnel)}}(t,this._api),t)},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype.recordLostEvent=function(t,e){var n;if(this.options.sendClientReports){var r=ro(e)+":"+t;br&&Ft.log("Adding outcome: "+r),this._outcomes[r]=(null!=(n=this._outcomes[r])?n:0)+1}},t.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var t=this._outcomes;if(this._outcomes={},Object.keys(t).length){br&&Ft.log("Flushing outcomes:\n"+JSON.stringify(t,null,2));var e=qn(this._api.dsn,this._api.tunnel),n=Ke(Object.keys(t).map((function(e){var n=ft(e.split(":"),2),r=n[0];return{reason:n[1],category:r,quantity:t[e]}})),this._api.tunnel&&qt(this._api.dsn));try{!function(t,e){"[object Navigator]"===Object.prototype.toString.call(eo&&eo.navigator)&&"function"==typeof eo.navigator.sendBeacon?eo.navigator.sendBeacon.bind(eo.navigator)(t,e):ce()&&mt(no()(t,{body:e,method:"POST",credentials:"omit",keepalive:!0}))}(e,Ye(n))}catch(t){br&&Ft.error(t)}}else br&&Ft.log("No outcomes to flush")}},t.prototype._handleResponse=function(t){var e=t.requestType,n=t.response,r=t.headers,o=t.resolve,i=t.reject,s=He(n.status);this._rateLimits=Ze(this._rateLimits,r),this._isRateLimited(e)&&br&&Ft.warn("Too many "+e+" requests, backing off until: "+this._disabledUntil(e)),"success"!==s?i(n):o({status:s})},t.prototype._disabledUntil=function(t){var e=ro(t);return new Date(Xe(this._rateLimits,e))},t.prototype._isRateLimited=function(t){var e=ro(t);return Je(this._rateLimits,e)},t}(),so=function(t){function e(e,n){void 0===n&&(n=no());var r=t.call(this,e)||this;return r._fetch=n,r}return lt(e,t),e.prototype._sendRequest=function(t,e){var n=this;if(this._isRateLimited(t.type))return this.recordLostEvent("ratelimit_backoff",t.type),Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429});var r={body:t.body,method:"POST",referrerPolicy:le()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new Be((function(e,o){n._fetch(t.url,r).then((function(r){var i={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:t.type,response:r,headers:i,resolve:e,reject:o})})).catch(o)}))})).then(void 0,(function(e){throw e instanceof Dt?n.recordLostEvent("queue_overflow",t.type):n.recordLostEvent("network_error",t.type),e}))},e}(io),ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lt(e,t),e.prototype._sendRequest=function(t,e){var n=this;return this._isRateLimited(t.type)?(this.recordLostEvent("ratelimit_backoff",t.type),Promise.reject({event:e,type:t.type,reason:"Transport for "+t.type+" requests locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new Be((function(e,r){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var i={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};n._handleResponse({requestType:t.type,response:o,headers:i,resolve:e,reject:r})}},o.open("POST",t.url),n.options.headers)Object.prototype.hasOwnProperty.call(n.options.headers,i)&&o.setRequestHeader(i,n.options.headers[i]);o.send(t.body)}))})).then(void 0,(function(e){throw e instanceof Dt?n.recordLostEvent("queue_overflow",t.type):n.recordLostEvent("network_error",t.type),e}))},e}(io);function co(t,e){return void 0===e&&(e=no()),Kn({bufferSize:t.bufferSize},(function(n){var r=pt({body:n.body,method:"POST",referrerPolicy:"origin"},t.requestOptions);return e(t.url,r).then((function(t){return t.text().then((function(e){return{body:e,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")},reason:t.statusText,statusCode:t.status}}))}))}))}function uo(t){return Kn({bufferSize:t.bufferSize},(function(e){return new Be((function(n,r){var o=new XMLHttpRequest;for(var i in o.onreadystatechange=function(){if(4===o.readyState){var t={body:o.response,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")},reason:o.statusText,statusCode:o.status};n(t)}},o.open("POST",t.url),t.headers)Object.prototype.hasOwnProperty.call(t.headers,i)&&o.setRequestHeader(i,t.headers[i]);o.send(e.body)}))}))}var lo={};e(lo,"Severity",(function(){return qe})),e(lo,"addGlobalEventProcessor",(function(){return cn})),e(lo,"addBreadcrumb",(function(){return xn})),e(lo,"captureException",(function(){return _n})),e(lo,"captureEvent",(function(){return wn})),e(lo,"captureMessage",(function(){return bn})),e(lo,"configureScope",(function(){return kn})),e(lo,"getHubFromCarrier",(function(){return vn})),e(lo,"getCurrentHub",(function(){return hn})),e(lo,"Hub",(function(){return pn})),e(lo,"makeMain",(function(){return fn})),e(lo,"Scope",(function(){return sn})),e(lo,"Session",(function(){return un})),e(lo,"startTransaction",(function(){return In})),e(lo,"SDK_VERSION",(function(){return"6.19.7"})),e(lo,"setContext",(function(){return En})),e(lo,"setExtra",(function(){return Tn})),e(lo,"setExtras",(function(){return Sn})),e(lo,"setTag",(function(){return Cn})),e(lo,"setTags",(function(){return On})),e(lo,"setUser",(function(){return Ln})),e(lo,"withScope",(function(){return jn})),e(lo,"BrowserClient",(function(){return fo})),e(lo,"injectReportDialog",(function(){return Or})),e(lo,"eventFromException",(function(){return vr})),e(lo,"eventFromMessage",(function(){return mr})),e(lo,"defaultIntegrations",(function(){return ho})),e(lo,"forceLoad",(function(){return yo})),e(lo,"init",(function(){return go})),e(lo,"lastEventId",(function(){return mo})),e(lo,"onLoad",(function(){return _o})),e(lo,"showReportDialog",(function(){return vo})),e(lo,"flush",(function(){return bo})),e(lo,"close",(function(){return wo})),e(lo,"wrap",(function(){return ko})),e(lo,"SDK_NAME",(function(){return Eo}));yt=s("k6cxq");var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lt(e,t),e.prototype.eventFromException=function(t,e){return vr(t,e,this._options.attachStacktrace)},e.prototype.eventFromMessage=function(t,e,n){return void 0===e&&(e=qe.Info),mr(t,e,n,this._options.attachStacktrace)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=pt(pt({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata}),n=Rn(e.dsn,e._metadata,e.tunnel),r=qn(n.dsn,n.tunnel);if(this._options.transport)return new this._options.transport(e);if(ce()){var o=pt({},e.fetchParameters);return this._newTransport=co({requestOptions:o,url:r}),new so(e)}return this._newTransport=uo({url:r,headers:e.headers}),new ao(e)},e}(Yn),fo=function(t){function e(e){void 0===e&&(e={});return e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:"6.19.7"}],version:"6.19.7"},t.call(this,po,e)||this}return lt(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),yt.getGlobalObject().document&&(this._isEnabled()?Or(pt(pt({},t),{dsn:t.dsn||this.getDsn()})):br&&Ft.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",t.prototype._prepareEvent.call(this,e,n,r)},e.prototype._sendEvent=function(e){var n=this.getIntegration(Br);n&&n.addSentryBreadcrumb(e),t.prototype._sendEvent.call(this,e)},e}(zn),ho=(yt=s("k6cxq"),[new gt.InboundFilters,new gt.FunctionToString,new Ar,new Br,new Tr,new $r,new Kr,new Yr]);function go(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=ho),void 0===t.release){var e=yt.getGlobalObject();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0),function(t,e){!0===e.debug&&(tn?Ft.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var n=hn(),r=n.getScope();r&&r.update(e.initialScope);var o=new t(e);n.bindClient(o)}(fo,t),t.autoSessionTracking&&function(){if(void 0===yt.getGlobalObject().document)return void(br&&Ft.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));var t=hn();if(!t.captureSession)return;xo(t),ve("history",(function(t){var e=t.from,n=t.to;void 0!==e&&e!==n&&xo(hn())}))}()}function vo(t){void 0===t&&(t={});var e=hn(),n=e.getScope();n&&(t.user=pt(pt({},n.getUser()),t.user)),t.eventId||(t.eventId=e.lastEventId());var r=e.getClient();r&&r.showReportDialog(t)}function mo(){return hn().lastEventId()}function yo(){}function _o(t){t()}function bo(t){var e=hn().getClient();return e?e.flush(t):(br&&Ft.warn("Cannot flush events. No client defined."),Pe(!1))}function wo(t){var e=hn().getClient();return e?e.close(t):(br&&Ft.warn("Cannot flush events and disable SDK. No client defined."),Pe(!1))}function ko(t){return Sr(t)()}function xo(t){t.startSession({ignoreDuration:!0}),t.captureSession()}var Eo="sentry.javascript.browser",So={},Oo=yt.getGlobalObject();Oo.Sentry&&Oo.Sentry.Integrations&&(So=Oo.Sentry.Integrations);var To=pt(pt(pt({},So),gt),Xn);r(ct,lo);var Co={components:v,core:_,diagnostics:b,elements:w,io:k,services:S,startup:O,storage:H,stores:$,styles:rt,subscriptions:ot,ui:it,util:st,vendorComponents:at,vendorServices:{gtag:({config:t,io:e,window:n})=>{const{trackingId:r,enabled:o}=t.gtag,i=()=>{n.dataLayer=[],n[`ga-disable-${r}`]=!o,s("js",e.date()),s("config",r)};function s(){n.dataLayer||i(),n.dataLayer.push(arguments)}return s},sentry:({config:t})=>(ct.init&&ct.init(t.sentry),ct)}},Lo={gtag:{trackingId:"UA-34497639-2",enabled:!1},sentry:{dsn:"https://63594154fcf34c34966aec13b15e2821@o418187.ingest.sentry.io/5320412",enabled:!1},app:{name:"Agile Avatars",issues:"https://github.com/mattriley/agileavatars/issues",source:"https://github.com/mattriley/agileavatars"},author:{name:"Matt Riley",profile:"https://www.linkedin.com/in/mattrileyau/"},gravatar:{domain:"https://secure.gravatar.com",size:600,fallbacks:["robohash","monsterid","wavatar","retro","identicon","mp"],errorMessage:"An error occurred. Please check your connection and try again."},options:{layout:"modes | shapes | size | spacing | sort | outline",modes:["active","passive"],shapes:["circle","square"],shapeRadius:{circle:50,square:0},active:{min:0,max:999,step:1},passive:{min:0,max:999,step:1},size:{min:100,max:600,step:10},spacing:{min:0,max:10,step:1},sort:{orderAdded:"Order added",roleThenName:"Role, then name",name:"Name"}},tags:{layout:"tagImage | tagName roleName",imagePadding:17},roles:{nilRole:{roleName:"",color:"#ffffff"},presetColors:{BA:"#6688c3",DEV:"#48a56a",PO:"#ce4a4a",QA:"#eaaf41",TL:"#000000",XD:"#b25da6"}},debounce:{adjustTagInstanceCounts:100,sortTagList:50},storage:{stores:["settings","roles","tags","tagInstances"],defaults:{settings:{app:{modal:"welcome",nilRoleId:null},options:{sort:"orderAdded",shape:"circle",active:1,passive:0,size:170,spacing:4,outline:!0},gravatar:{fallback:"robohash",freetext:"",status:"ready",errorMessage:""}}}}};const{storage:jo,util:Io}=Co;const Ro=/localhost/.test(window.location.host),No=(({window:t},...e)=>{const{compose:r,config:o}=n(a)(Co,Lo,...e),{stores:i}=r("stores",{storage:jo,config:o},(t=>t.setup())),{subscriptions:s}=r("subscriptions",{stores:i,util:Io},(t=>t.setup())),{core:c}=r("core",{util:Io,config:o}),{io:u}=r("io",{window:t},(t=>t.setup())),{services:l}=r("services",{subscriptions:s,stores:i,core:c,io:u,util:Io,config:o}),{vendorServices:p}=r("vendorServices",{io:u,config:o,window:t}),{ui:d}=r("ui",{window:t}),{el:f}=d,{elements:h}=r("elements",{el:f,ui:d,util:Io}),{vendorComponents:g}=r("vendorComponents",{el:f,ui:d,config:o,window:t}),{components:v}=r("components",{el:f,ui:d,elements:h,vendorComponents:g,vendorServices:p,services:l,subscriptions:s,util:Io,config:o}),{styles:m}=r("styles",{el:f,ui:d,subscriptions:s,config:o});return r("diagnostics",{stores:i,util:Io}),r("startup",{ui:d,components:v,styles:m,services:l,subscriptions:s,stores:i,util:Io,config:o})})({window:window},{gtag:{enabled:!Ro},sentry:{enabled:!Ro}}),{config:Ao,startup:Do,components:Po}=No;window.app=No,window.document.title=Ao.app.name;const{createRoot:Mo}=Do.start();Mo(document.getElementById("app")).render(Po.app());